1688053738
waR3U4bTeM%3Ac925adfb3cb79f56f444093425b3a565-81b6a2abdd43e324c78f8a710827d740
s:16604:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6NDE6IlRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb2NrcGl0IHByb2plY3QuIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjE5NDoiKGMpIEFydHVyIEhlaW56ZSAtIPCfhbDwn4W28J+FtPCfhb3wn4aD8J+FtPCfhbnwn4W+LCBodHRwOi8vYWdlbnRlam8uY29tCgpGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQpmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4iO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjgxYjZhMmFiZGQ0M2UzMjRjNzhmOGE3MTA4MjdkNzQwIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTM6ImJvb3RzdHJhcC5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czozNToiY29ja3BpdC9tb2R1bGVzL0Zvcm1zL2Jvb3RzdHJhcC5waHAiO3M6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAc291cmNlIjtzOjEwNDg2OiI8P3BocA0KLyoqDQogKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0aGUgQ29ja3BpdCBwcm9qZWN0Lg0KICoNCiAqIChjKSBBcnR1ciBIZWluemUgLSDwn4Ww8J+FtvCfhbTwn4W98J+Gg/CfhbTwn4W58J+FviwgaHR0cDovL2FnZW50ZWpvLmNvbQ0KICoNCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFDQogKiBmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4NCiAqLw0KDQokdGhpcy0+bW9kdWxlKCdmb3JtcycpLT5leHRlbmQoWw0KDQogICAgJ2NyZWF0ZUZvcm0nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSA9IFtdKSB7DQoNCiAgICAgICAgaWYgKCF0cmltKCRuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGNvbmZpZ3BhdGggPSAkdGhpcy0+YXBwLT5wYXRoKCcjc3RvcmFnZTonKS4nL2Zvcm1zJzsNCg0KICAgICAgICBpZiAoISR0aGlzLT5hcHAtPnBhdGgoJyNzdG9yYWdlOmZvcm1zJykpIHsNCg0KICAgICAgICAgICAgaWYgKCEkdGhpcy0+YXBwLT5oZWxwZXIoJ2ZzJyktPm1rZGlyKCRjb25maWdwYXRoKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdGhpcy0+ZXhpc3RzKCRuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRpbWUgPSB0aW1lKCk7DQoNCiAgICAgICAgJGZvcm0gPSBhcnJheV9yZXBsYWNlX3JlY3Vyc2l2ZShbDQogICAgICAgICAgICAnX2lkJyAgICAgICA9PiAkbmFtZSwNCiAgICAgICAgICAgICduYW1lJyAgICAgID0+ICRuYW1lLA0KICAgICAgICAgICAgJ2xhYmVsJyAgICAgPT4gJG5hbWUsDQogICAgICAgICAgICAnc2F2ZV9lbnRyeScgPT4gdHJ1ZSwNCiAgICAgICAgICAgICdpbl9tZW51JyAgID0+IGZhbHNlLA0KICAgICAgICAgICAgJ2VtYWlsX2ZvcndhcmQnID0+ICcnLA0KICAgICAgICAgICAgJ19jcmVhdGVkJyAgPT4gJHRpbWUsDQogICAgICAgICAgICAnX21vZGlmaWVkJyA9PiAkdGltZQ0KICAgICAgICBdLCAkZGF0YSk7DQoNCiAgICAgICAgJGV4cG9ydCA9IHZhcl9leHBvcnQoJGZvcm0sIHRydWUpOw0KDQogICAgICAgIGlmICghJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT53cml0ZSgiI3N0b3JhZ2U6Zm9ybXMveyRuYW1lfS5mb3JtLnBocCIsICI8P3BocFxuIHJldHVybiB7JGV4cG9ydH07IikpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkZm9ybTsNCiAgICB9LA0KDQogICAgJ3VwZGF0ZUZvcm0nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSkgew0KDQogICAgICAgICRtZXRhcGF0aCA9ICR0aGlzLT5hcHAtPnBhdGgoIiNzdG9yYWdlOmZvcm1zL3skbmFtZX0uZm9ybS5waHAiKTsNCg0KICAgICAgICBpZiAoISRtZXRhcGF0aCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGRhdGFbJ19tb2RpZmllZCddID0gdGltZSgpOw0KDQogICAgICAgICRmb3JtICAgPSBpbmNsdWRlKCRtZXRhcGF0aCk7DQogICAgICAgICRmb3JtICAgPSBhcnJheV9tZXJnZSgkZm9ybSwgJGRhdGEpOw0KICAgICAgICAkZXhwb3J0ID0gdmFyX2V4cG9ydCgkZm9ybSwgdHJ1ZSk7DQoNCiAgICAgICAgaWYgKCEkdGhpcy0+YXBwLT5oZWxwZXIoJ2ZzJyktPndyaXRlKCRtZXRhcGF0aCwgIjw/cGhwXG4gcmV0dXJuIHskZXhwb3J0fTsiKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnb3BjYWNoZV9yZXNldCcpKSBvcGNhY2hlX3Jlc2V0KCk7DQoNCiAgICAgICAgcmV0dXJuICRmb3JtOw0KICAgIH0sDQoNCiAgICAnc2F2ZUZvcm0nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSkgew0KDQogICAgICAgIGlmICghdHJpbSgkbmFtZSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBpc3NldCgkZGF0YVsnX2lkJ10pID8gJHRoaXMtPnVwZGF0ZUZvcm0oJG5hbWUsICRkYXRhKSA6ICR0aGlzLT5jcmVhdGVGb3JtKCRuYW1lLCAkZGF0YSk7DQogICAgfSwNCg0KICAgICdyZW1vdmVGb3JtJyA9PiBmdW5jdGlvbigkbmFtZSkgew0KDQogICAgICAgIGlmICgkZm9ybSA9ICR0aGlzLT5mb3JtKCRuYW1lKSkgew0KDQogICAgICAgICAgICAkZm9ybSA9ICRmb3JtWydfaWQnXTsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT5kZWxldGUoIiNzdG9yYWdlOmZvcm1zL3skbmFtZX0uZm9ybS5waHAiKTsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnN0b3JhZ2UtPmRyb3BDb2xsZWN0aW9uKCJmb3Jtcy97JGZvcm19Iik7DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICAnZm9ybXMnID0+IGZ1bmN0aW9uKCRleHRlbmRlZCA9IGZhbHNlKSB7DQoNCiAgICAgICAgJHN0b3JlcyA9IFtdOw0KDQogICAgICAgIGZvcmVhY2goJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT5scygnKi5mb3JtLnBocCcsICcjc3RvcmFnZTpmb3JtcycpIGFzICRwYXRoKSB7DQoNCiAgICAgICAgICAgICRzdG9yZSA9IGluY2x1ZGUoJHBhdGgtPmdldFBhdGhOYW1lKCkpOw0KDQogICAgICAgICAgICBpZiAoJGV4dGVuZGVkKSB7DQogICAgICAgICAgICAgICAgJHN0b3JlWydpdGVtc0NvdW50J10gPSAkdGhpcy0+Y291bnQoJHN0b3JlWyduYW1lJ10pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkc3RvcmVzWyRzdG9yZVsnbmFtZSddXSA9ICRzdG9yZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkc3RvcmVzOw0KICAgIH0sDQoNCiAgICAnZXhpc3RzJyA9PiBmdW5jdGlvbigkbmFtZSkgew0KICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+cGF0aCgiI3N0b3JhZ2U6Zm9ybXMveyRuYW1lfS5mb3JtLnBocCIpOw0KICAgIH0sDQoNCiAgICAnZm9ybScgPT4gZnVuY3Rpb24oJG5hbWUpIHsNCg0KICAgICAgICBzdGF0aWMgJGZvcm1zOyAvLyBjYWNoZQ0KDQogICAgICAgIGlmIChpc19udWxsKCRmb3JtcykpIHsNCiAgICAgICAgICAgICRmb3JtcyA9IFtdOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFpc19zdHJpbmcoJG5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWlzc2V0KCRmb3Jtc1skbmFtZV0pKSB7DQoNCiAgICAgICAgICAgICRmb3Jtc1skbmFtZV0gPSBmYWxzZTsNCg0KICAgICAgICAgICAgaWYgKCRwYXRoID0gJHRoaXMtPmV4aXN0cygkbmFtZSkpIHsNCiAgICAgICAgICAgICAgICAkZm9ybXNbJG5hbWVdID0gaW5jbHVkZSgkcGF0aCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGZvcm1zWyRuYW1lXTsNCiAgICB9LA0KDQogICAgJ2VudHJpZXMnID0+IGZ1bmN0aW9uKCRuYW1lKSB7DQoNCiAgICAgICAgJGZvcm1zID0gJHRoaXMtPmZvcm0oJG5hbWUpOw0KDQogICAgICAgIGlmICghJGZvcm1zKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgJGZvcm0gPSAkZm9ybXNbJ19pZCddOw0KDQogICAgICAgIHJldHVybiAkdGhpcy0+YXBwLT5zdG9yYWdlLT5nZXRDb2xsZWN0aW9uKCJmb3Jtcy97JGZvcm19Iik7DQogICAgfSwNCg0KICAgICdmaW5kJyA9PiBmdW5jdGlvbigkZm9ybSwgJG9wdGlvbnMgPSBbXSkgew0KDQogICAgICAgICRmb3JtcyA9ICR0aGlzLT5mb3JtKCRmb3JtKTsNCg0KICAgICAgICBpZiAoISRmb3JtcykgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgICRmb3JtID0gJGZvcm1zWydfaWQnXTsNCg0KICAgICAgICAvLyBzb3J0IGJ5IGN1c3RvbSBvcmRlciBpZiBmb3JtIGlzIHNvcnRhYmxlDQogICAgICAgIGlmIChpc3NldCgkZm9ybXNbJ3NvcnRhYmxlJ10pICYmICRmb3Jtc1snc29ydGFibGUnXSAmJiAhaXNzZXQoJG9wdGlvbnNbJ3NvcnQnXSkpIHsNCiAgICAgICAgICAgICRvcHRpb25zWydzb3J0J10gPSBbJ19vcmRlcicgPT4gMV07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gKGFycmF5KSR0aGlzLT5hcHAtPnN0b3JhZ2UtPmZpbmQoImZvcm1zL3skZm9ybX0iLCAkb3B0aW9ucyk7DQogICAgfSwNCg0KICAgICdmaW5kT25lJyA9PiBmdW5jdGlvbigkZm9ybSwgJGNyaXRlcmlhID0gW10sICRwcm9qZWN0aW9uID0gbnVsbCkgew0KDQogICAgICAgICRmb3JtcyA9ICR0aGlzLT5mb3JtKCRmb3JtKTsNCg0KICAgICAgICBpZiAoISRmb3JtcykgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgICRmb3JtID0gJGZvcm1zWydfaWQnXTsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+c3RvcmFnZS0+ZmluZE9uZSgiZm9ybXMveyRmb3JtfSIsICRjcml0ZXJpYSwgJHByb2plY3Rpb24pOw0KICAgIH0sDQoNCiAgICAnc2F2ZScgPT4gZnVuY3Rpb24oJGZvcm0sICRkYXRhKSB7DQoNCiAgICAgICAgJGZvcm1zID0gJHRoaXMtPmZvcm0oJGZvcm0pOw0KDQogICAgICAgIGlmICghJGZvcm1zKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgJG5hbWUgICAgICAgPSAkZm9ybTsNCiAgICAgICAgJGZvcm0gICAgICAgPSAkZm9ybXNbJ19pZCddOw0KICAgICAgICAkZGF0YSAgICAgICA9IGlzc2V0KCRkYXRhWzBdKSA/ICRkYXRhIDogWyRkYXRhXTsNCiAgICAgICAgJHJldHVybiAgICAgPSBbXTsNCiAgICAgICAgJG1vZGlmaWVkICAgPSB0aW1lKCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJGRhdGEgYXMgJGVudHJ5KSB7DQoNCiAgICAgICAgICAgICRpc1VwZGF0ZSA9IGlzc2V0KCRlbnRyeVsnX2lkJ10pOw0KDQogICAgICAgICAgICAkZW50cnlbJ19tb2RpZmllZCddID0gJG1vZGlmaWVkOw0KDQogICAgICAgICAgICBpZiAoISRpc1VwZGF0ZSkgew0KICAgICAgICAgICAgICAgICRlbnRyeVsnX2NyZWF0ZWQnXSA9ICRlbnRyeVsnX21vZGlmaWVkJ107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ2Zvcm1zLnNhdmUuYmVmb3JlJywgWyRuYW1lLCAmJGVudHJ5XSk7DQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJmb3Jtcy5zYXZlLmJlZm9yZS57JG5hbWV9IiwgWyRuYW1lLCAmJGVudHJ5XSk7DQoNCiAgICAgICAgICAgICRyZXQgPSAkdGhpcy0+YXBwLT5zdG9yYWdlLT5zYXZlKCJmb3Jtcy97JGZvcm19IiwgJGVudHJ5KTsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignZm9ybXMuc2F2ZS5hZnRlcicsIFskbmFtZSwgJiRlbnRyeV0pOw0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigiZm9ybXMuc2F2ZS5hZnRlci57JG5hbWV9IiwgWyRuYW1lLCAmJGVudHJ5XSk7DQoNCiAgICAgICAgICAgICRyZXR1cm5bXSA9ICRyZXQgPyAkZW50cnkgOiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBjb3VudCgkcmV0dXJuKSA9PSAxID8gJHJldHVyblswXSA6ICRyZXR1cm47DQogICAgfSwNCg0KICAgICdyZW1vdmUnID0+IGZ1bmN0aW9uKCRmb3JtLCAkY3JpdGVyaWEpIHsNCg0KICAgICAgICAkZm9ybXMgPSAkdGhpcy0+Zm9ybSgkZm9ybSk7DQoNCiAgICAgICAgaWYgKCEkZm9ybXMpIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAkZm9ybSA9ICRmb3Jtc1snX2lkJ107DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5hcHAtPnN0b3JhZ2UtPnJlbW92ZSgiZm9ybXMveyRmb3JtfSIsICRjcml0ZXJpYSk7DQogICAgfSwNCg0KICAgICdjb3VudCcgPT4gZnVuY3Rpb24oJGZvcm0sICRjcml0ZXJpYSA9IFtdKSB7DQoNCiAgICAgICAgJGZvcm1zID0gJHRoaXMtPmZvcm0oJGZvcm0pOw0KDQogICAgICAgIGlmICghJGZvcm1zKSByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgJGZvcm0gPSAkZm9ybXNbJ19pZCddOw0KDQogICAgICAgIHJldHVybiAkdGhpcy0+YXBwLT5zdG9yYWdlLT5jb3VudCgiZm9ybXMveyRmb3JtfSIsICRjcml0ZXJpYSk7DQogICAgfSwNCg0KICAgICdvcGVuJyA9PiBmdW5jdGlvbigkbmFtZSwgJG9wdGlvbnMgPSBbXSkgew0KDQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoImZvcm1zLm9wZW4uYmVmb3JlIiwgWyRuYW1lLCAmJG9wdGlvbnNdKTsNCg0KICAgICAgICAkb3B0aW9ucyA9IGFycmF5X21lcmdlKFsNCiAgICAgICAgICAgICdpZCcgICAgICAgICAgPT4gdW5pcWlkKCdmb3JtJyksDQogICAgICAgICAgICAnY2xhc3MnICAgICAgID0+ICcnLA0KICAgICAgICAgICAgJ2FjdGlvbicgICAgICA9PiAkdGhpcy0+YXBwLT5yb3V0ZVVybCgnL2FwaS9mb3Jtcy9zdWJtaXQvJy4kbmFtZSksDQogICAgICAgICAgICAnbWV0aG9kJyAgICAgID0+ICdwb3N0JywNCiAgICAgICAgICAgICdlbmN0eXBlJyAgICAgPT4gJ211bHRpcGFydC9mb3JtLWRhdGEnLA0KICAgICAgICAgICAgJ2NzcmYnICAgICAgICA9PiAkdGhpcy0+YXBwLT5oYXNoKCRuYW1lKSwNCiAgICAgICAgICAgICdtYWlsc3ViamVjdCcgPT4gZmFsc2UsDQogICAgICAgICAgICAnaW5jbHVkZV9qcycgID0+IHRydWUNCiAgICAgICAgXSwgJG9wdGlvbnMpOw0KDQogICAgICAgICR0aGlzLT5hcHAtPnJlbmRlclZpZXcoJ2Zvcm1zOnZpZXdzL2FwaS9mb3JtLnBocCcsIGNvbXBhY3QoJ25hbWUnLCAnb3B0aW9ucycpKTsNCg0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJmb3Jtcy5vcGVuLmFmdGVyIiwgWyRuYW1lLCAmJG9wdGlvbnNdKTsNCg0KICAgIH0sDQoNCiAgICAnY2xvc2UnID0+IGZ1bmN0aW9uKCRuYW1lID0gbnVsbCwgJG9wdGlvbnMgPSBbXSkgew0KDQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoImZvcm1zLmNsb3NlLmJlZm9yZSIsIFskbmFtZSwgJiRvcHRpb25zXSk7DQogICAgICAgIGVjaG8gJzwvZm9ybT4nOw0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJmb3Jtcy5jbG9zZS5hZnRlciIsIFskbmFtZSwgJiRvcHRpb25zXSk7DQoNCiAgICB9LA0KDQogICAgJ3N1Ym1pdCcgPT4gZnVuY3Rpb24oJGZvcm0sICRkYXRhLCAkb3B0aW9ucyA9IFtdKSB7DQoNCiAgICAgICAgJGZybSA9ICR0aGlzLT5mb3JtKCRmb3JtKTsNCg0KICAgICAgICBpZiAoISRmcm0pIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGN1c3RvbSBmb3JtIHZhbGlkYXRpb24NCiAgICAgICAgaWYgKCR0aGlzLT5hcHAtPnBhdGgoIiNjb25maWc6Zm9ybXMveyRmb3JtfS5waHAiKSAmJiBmYWxzZT09PWluY2x1ZGUoJHRoaXMtPmFwcC0+cGF0aCgiI2NvbmZpZzpmb3Jtcy97JGZvcm19LnBocCIpKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignZm9ybXMuc3VibWl0LmJlZm9yZScsIFskZm9ybSwgJiRkYXRhLCAkZnJtLCAmJG9wdGlvbnNdKTsNCg0KICAgICAgICBpZiAoaXNzZXQoJGZybVsnZW1haWxfZm9yd2FyZCddKSAmJiAkZnJtWydlbWFpbF9mb3J3YXJkJ10pIHsNCg0KICAgICAgICAgICAgJGVtYWlscyAgICAgICAgICA9IGFycmF5X21hcCgndHJpbScsIGV4cGxvZGUoJywnLCAkZnJtWydlbWFpbF9mb3J3YXJkJ10pKTsNCiAgICAgICAgICAgICRmaWx0ZXJlZF9lbWFpbHMgPSBbXTsNCg0KICAgICAgICAgICAgZm9yZWFjaCAoJGVtYWlscyBhcyAkdG8pew0KDQogICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgZWFjaCBlbWFpbCBhZGRyZXNzIGluZGl2aWR1YWxseSwgcHVzaCBpZiB2YWxpZA0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+YXBwLT5oZWxwZXIoJ3V0aWxzJyktPmlzRW1haWwoJHRvKSl7DQogICAgICAgICAgICAgICAgICAgICRmaWx0ZXJlZF9lbWFpbHNbXSA9ICR0bzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChjb3VudCgkZmlsdGVyZWRfZW1haWxzKSkgew0KDQogICAgICAgICAgICAgICAgJGZybVsnZW1haWxfZm9yd2FyZCddID0gaW1wbG9kZSgnLCcsICRmaWx0ZXJlZF9lbWFpbHMpOw0KDQogICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYW4gZW1haWwgdGVtcGxhdGUgYXZhaWxhYmxlDQogICAgICAgICAgICAgICAgaWYgKCR0ZW1wbGF0ZSA9ICR0aGlzLT5hcHAtPnBhdGgoIiNjb25maWc6Zm9ybXMvZW1haWxzL3skZm9ybX0ucGhwIikpIHsNCg0KICAgICAgICAgICAgICAgICAgICAkYm9keSA9ICR0aGlzLT5hcHAtPnJlbmRlcmVyLT5maWxlKCR0ZW1wbGF0ZSwgWydkYXRhJyA9PiAkZGF0YSwgJ2ZybScgPT4gJGZybV0sIGZhbHNlKTsNCg0KICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgdGVtcGxhdGUgbWFudWFsbHkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgICAgICAgICAgICRib2R5ID0gW107DQoNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGEgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRib2R5W10gPSAiPGI+eyRrZXl9OjwvYj5cbjxicj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgJGJvZHlbXSA9IChpc19zdHJpbmcoJHZhbHVlKSA/ICR2YWx1ZTpqc29uX2VuY29kZSgkdmFsdWUpKS4iXG48YnI+IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICRib2R5ID0gaW1wbG9kZSgiXG48YnI+IiwgJGJvZHkpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICRmb3JtbmFtZSA9IGlzc2V0KCRmcm1bJ2xhYmVsJ10pICYmIHRyaW0oJGZybVsnbGFiZWwnXSkgPyAkZnJtWydsYWJlbCddIDogJGZvcm07DQoNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAkcmVzcG9uc2UgPSAkdGhpcy0+YXBwLT5tYWlsZXItPm1haWwoJGZybVsnZW1haWxfZm9yd2FyZCddLCAkb3B0aW9uc1snc3ViamVjdCddID8/ICJOZXcgZm9ybSBkYXRhIGZvcjogeyRmb3JtbmFtZX0iLCAkYm9keSwgJG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFxFeGNlcHRpb24gJGUpIHsNCiAgICAgICAgICAgICAgICAgICAgJHJlc3BvbnNlID0gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoaXNzZXQoJGZybVsnc2F2ZV9lbnRyeSddKSAmJiAkZnJtWydzYXZlX2VudHJ5J10pIHsNCiAgICAgICAgICAgICRlbnRyeSA9IFsnZGF0YScgPT4gJGRhdGFdOw0KICAgICAgICAgICAgJHRoaXMtPnNhdmUoJGZvcm0sICRlbnRyeSk7DQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCdmb3Jtcy5zdWJtaXQuYWZ0ZXInLCBbJGZvcm0sICYkZGF0YSwgJGZybV0pOw0KDQogICAgICAgIHJldHVybiAoaXNzZXQoJHJlc3BvbnNlKSAmJiAkcmVzcG9uc2UgIT09IHRydWUpID8gWydlcnJvcicgPT4gJHJlc3BvbnNlLCAnZGF0YScgPT4gJGRhdGFdIDogJGRhdGE7DQogICAgfQ0KXSk7DQoNCi8vIEFDTA0KJGFwcCgnYWNsJyktPmFkZFJlc291cmNlKCdmb3JtcycsIFsnY3JlYXRlJywgJ2RlbGV0ZScsICdtYW5hZ2UnXSk7DQoNCg0KLy8gUkVTVA0KaWYgKENPQ0tQSVRfQVBJX1JFUVVFU1QpIHsNCg0KICAgICR0aGlzLT5iaW5kKCcvYXBpL2Zvcm1zL3N1Ym1pdC86Zm9ybScsIGZ1bmN0aW9uKCRwYXJhbXMpIHsNCg0KICAgICAgICAkZm9ybSA9ICRwYXJhbXNbImZvcm0iXTsNCiAgICAgICAgJGZvcm1oYXNoID0gJHRoaXMtPnBhcmFtKCdfX2NzcmYnLCBmYWxzZSk7DQoNCiAgICAgICAgLy8gU2VjdXJpdHkgY2hlY2sNCiAgICAgICAgaWYgKCFwYXNzd29yZF92ZXJpZnkoJGZvcm0sICRmb3JtaGFzaCkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkZGF0YSA9ICR0aGlzLT5wYXJhbSgnZm9ybScsIGZhbHNlKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5tb2R1bGUoJ2Zvcm1zJyktPnN1Ym1pdCgkZm9ybSwgJGRhdGEsICR0aGlzLT5wYXJhbSgnZm9ybV9vcHRpb25zJywgW10pKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgIH0sICR0aGlzLT5wYXJhbSgnX19jc3JmJywgZmFsc2UpKTsNCg0KICAgIGlmICghJHRoaXMtPnBhcmFtKCdfX2NzcmYnLCBmYWxzZSkpIHsNCg0KICAgICAgICAkYXBwLT5vbignY29ja3BpdC5yZXN0LmluaXQnLCBmdW5jdGlvbigkcm91dGVzKSB7DQogICAgICAgICAgICAkcm91dGVzWydmb3JtcyddID0gJ0Zvcm1zXFxDb250cm9sbGVyXFxSZXN0QXBpJzsNCiAgICAgICAgfSk7DQogICAgfQ0KfQ0KDQovLyBBRE1JTg0KaWYgKENPQ0tQSVRfQURNSU5fQ1ApIHsNCiAgICBpbmNsdWRlX29uY2UoX19ESVJfXy4nL2FkbWluLnBocCcpOw0KfQ0KDQovLyBDTEkNCmlmIChDT0NLUElUX0NMSSkgew0KICAgICR0aGlzLT5wYXRoKCcjY2xpJywgX19ESVJfXy4nL2NsaScpOw0KfQ0KIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";