<?php declare(strict_types=1);namespace Pdp\HttpAdapter;use Pdp\Exception\CurlHttpAdapterException;class CurlHttpAdapter implements HttpAdapterInterface{public function getContent($url,$timeout=5){$ch=\curl_init();if($ch===false){throw new \Exception('PHP-Domain-Parser: failed to initialize : cURL');}\curl_setopt($ch,\CURLOPT_CONNECTTIMEOUT,$timeout);\curl_setopt($ch,\CURLOPT_TIMEOUT,$timeout);\curl_setopt($ch,\CURLOPT_URL,$url);\curl_setopt($ch,\CURLOPT_RETURNTRANSFER,true);\curl_setopt($ch,\CURLOPT_FOLLOWLOCATION,true);\curl_setopt($ch,\CURLOPT_FAILONERROR,true);\curl_setopt($ch,\CURLOPT_SSL_VERIFYHOST,false);\curl_setopt($ch,\CURLOPT_SSL_VERIFYPEER,false);\curl_setopt($ch,\CURLOPT_USERAGENT,'PHP-Domain-Parser cURL Request');$content=\curl_exec($ch);$errNo=\curl_errno($ch);if($errNo){throw new CurlHttpAdapterException("CURL error [{$errNo}]: ".\curl_error($ch),$errNo);}$responseCode=\curl_getinfo($ch,\CURLINFO_HTTP_CODE);if($responseCode!==200){throw new CurlHttpAdapterException('Wrong HTTP response code: '.$responseCode,$responseCode);}\curl_close($ch);\assert($content===false||\is_string($content));return $content;}}