1687716137
waR3U4bTeM%3A7a819777983a37a3e7f64e6f7968ec74-078510fee096ef4cb517b69abc3bcce8
s:19232:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6NDE6IlRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb2NrcGl0IHByb2plY3QuIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjE5NDoiKGMpIEFydHVyIEhlaW56ZSAtIPCfhbDwn4W28J+FtPCfhb3wn4aD8J+FtPCfhbnwn4W+LCBodHRwOi8vYWdlbnRlam8uY29tCgpGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQpmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4iO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjA3ODUxMGZlZTA5NmVmNGNiNTE3YjY5YWJjM2JjY2U4IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTM6ImJvb3RzdHJhcC5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo0MDoiY29ja3BpdC9tb2R1bGVzL1NpbmdsZXRvbnMvYm9vdHN0cmFwLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6MTI0NTA6Ijw/cGhwDQovKioNCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb2NrcGl0IHByb2plY3QuDQogKg0KICogKGMpIEFydHVyIEhlaW56ZSAtIPCfhbDwn4W28J+FtPCfhb3wn4aD8J+FtPCfhbnwn4W+LCBodHRwOi8vYWdlbnRlam8uY29tDQogKg0KICogRm9yIHRoZSBmdWxsIGNvcHlyaWdodCBhbmQgbGljZW5zZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHZpZXcgdGhlIExJQ0VOU0UNCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLg0KICovDQoNCiR0aGlzLT5tb2R1bGUoJ3NpbmdsZXRvbnMnKS0+ZXh0ZW5kKFsNCg0KICAgICdjcmVhdGVTaW5nbGV0b24nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSA9IFtdKSB7DQoNCiAgICAgICAgaWYgKCF0cmltKCRuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGNvbmZpZ3BhdGggPSAkdGhpcy0+YXBwLT5wYXRoKCcjc3RvcmFnZTonKS4nL3NpbmdsZXRvbic7DQoNCiAgICAgICAgaWYgKCEkdGhpcy0+YXBwLT5wYXRoKCcjc3RvcmFnZTpzaW5nbGV0b24nKSkgew0KDQogICAgICAgICAgICBpZiAoISR0aGlzLT5hcHAtPmhlbHBlcignZnMnKS0+bWtkaXIoJGNvbmZpZ3BhdGgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCR0aGlzLT5leGlzdHMoJG5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkdGltZSA9IHRpbWUoKTsNCg0KICAgICAgICAkc2luZ2xldG9uID0gYXJyYXlfcmVwbGFjZV9yZWN1cnNpdmUoWw0KICAgICAgICAgICAgJ25hbWUnICAgICAgPT4gJG5hbWUsDQogICAgICAgICAgICAnbGFiZWwnICAgICA9PiAkbmFtZSwNCiAgICAgICAgICAgICdfaWQnICAgICAgID0+ICRuYW1lLA0KICAgICAgICAgICAgJ2ZpZWxkcycgICAgPT4gW10sDQogICAgICAgICAgICAnZGF0YScgICAgICA9PiBudWxsLA0KICAgICAgICAgICAgJ19jcmVhdGVkJyAgPT4gJHRpbWUsDQogICAgICAgICAgICAnX21vZGlmaWVkJyA9PiAkdGltZQ0KICAgICAgICBdLCAkZGF0YSk7DQoNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmUuYmVmb3JlJywgWyRzaW5nbGV0b25dKTsNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigic2luZ2xldG9uLnNhdmUuYmVmb3JlLnskbmFtZX0iLCBbJHNpbmdsZXRvbl0pOw0KDQogICAgICAgICRleHBvcnQgPSB2YXJfZXhwb3J0KCRzaW5nbGV0b24sIHRydWUpOw0KDQogICAgICAgIGlmICghJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT53cml0ZSgiI3N0b3JhZ2U6c2luZ2xldG9uL3skbmFtZX0uc2luZ2xldG9uLnBocCIsICI8P3BocFxuIHJldHVybiB7JGV4cG9ydH07IikpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ3NpbmdsZXRvbi5zYXZlLmFmdGVyJywgWyRzaW5nbGV0b25dKTsNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigic2luZ2xldG9uLnNhdmUuYWZ0ZXIueyRuYW1lfSIsIFskc2luZ2xldG9uXSk7DQoNCiAgICAgICAgcmV0dXJuICRzaW5nbGV0b247DQogICAgfSwNCg0KICAgICd1cGRhdGVTaW5nbGV0b24nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSkgew0KDQogICAgICAgICRtZXRhcGF0aCA9ICR0aGlzLT5hcHAtPnBhdGgoIiNzdG9yYWdlOnNpbmdsZXRvbi97JG5hbWV9LnNpbmdsZXRvbi5waHAiKTsNCg0KICAgICAgICBpZiAoISRtZXRhcGF0aCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGRhdGFbJ19tb2RpZmllZCddID0gdGltZSgpOw0KDQogICAgICAgICRzaW5nbGV0b24gID0gaW5jbHVkZSgkbWV0YXBhdGgpOw0KICAgICAgICAkc2luZ2xldG9uICA9IGFycmF5X21lcmdlKCRzaW5nbGV0b24sICRkYXRhKTsNCg0KDQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ3NpbmdsZXRvbi5zYXZlLmJlZm9yZScsIFskc2luZ2xldG9uXSk7DQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoInNpbmdsZXRvbi5zYXZlLmJlZm9yZS57JG5hbWV9IiwgWyRzaW5nbGV0b25dKTsNCg0KICAgICAgICAkZXhwb3J0ICA9IHZhcl9leHBvcnQoJHNpbmdsZXRvbiwgdHJ1ZSk7DQoNCiAgICAgICAgaWYgKCEkdGhpcy0+YXBwLT5oZWxwZXIoJ2ZzJyktPndyaXRlKCRtZXRhcGF0aCwgIjw/cGhwXG4gcmV0dXJuIHskZXhwb3J0fTsiKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmUuYWZ0ZXInLCBbJHNpbmdsZXRvbl0pOw0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uc2F2ZS5hZnRlci57JG5hbWV9IiwgWyRzaW5nbGV0b25dKTsNCg0KICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdvcGNhY2hlX3Jlc2V0JykpIG9wY2FjaGVfcmVzZXQoKTsNCg0KICAgICAgICByZXR1cm4gJHNpbmdsZXRvbjsNCiAgICB9LA0KDQogICAgJ3NhdmVTaW5nbGV0b24nID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSkgew0KDQogICAgICAgIGlmICghdHJpbSgkbmFtZSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBpc3NldCgkZGF0YVsnX2lkJ10pID8gJHRoaXMtPnVwZGF0ZVNpbmdsZXRvbigkbmFtZSwgJGRhdGEpIDogJHRoaXMtPmNyZWF0ZVNpbmdsZXRvbigkbmFtZSwgJGRhdGEpOw0KICAgIH0sDQoNCiAgICAncmVtb3ZlU2luZ2xldG9uJyA9PiBmdW5jdGlvbigkbmFtZSkgew0KDQogICAgICAgIGlmICgkc2luZ2xldG9uID0gJHRoaXMtPnNpbmdsZXRvbigkbmFtZSkpIHsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT5kZWxldGUoIiNzdG9yYWdlOnNpbmdsZXRvbi97JG5hbWV9LnNpbmdsZXRvbi5waHAiKTsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnN0b3JhZ2UtPnJlbW92ZUtleSgnc2luZ2xldG9ucycsICRuYW1lKTsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnJlbW92ZScsIFskc2luZ2xldG9uXSk7DQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24ucmVtb3ZlLnskbmFtZX0iLCBbJHNpbmdsZXRvbl0pOw0KDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgJ3NhdmVEYXRhJyA9PiBmdW5jdGlvbigkbmFtZSwgJGRhdGEsICRvcHRpb25zID0gW10pIHsNCg0KICAgICAgICBpZiAoJHNpbmdsZXRvbiA9ICR0aGlzLT5zaW5nbGV0b24oJG5hbWUpKSB7DQoNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ3NpbmdsZXRvbi5zYXZlRGF0YS5iZWZvcmUnLCBbJHNpbmdsZXRvbiwgJiRkYXRhXSk7DQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uc2F2ZURhdGEuYmVmb3JlLnskbmFtZX0iLCBbJHNpbmdsZXRvbiwgJiRkYXRhXSk7DQoNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnN0b3JhZ2UtPnNldEtleSgnc2luZ2xldG9ucycsICRuYW1lLCAkZGF0YSk7DQoNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ3NpbmdsZXRvbi5zYXZlRGF0YS5hZnRlcicsIFskc2luZ2xldG9uLCAkZGF0YV0pOw0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigic2luZ2xldG9uLnNhdmVEYXRhLmFmdGVyLnskbmFtZX0iLCBbJHNpbmdsZXRvbiwgJGRhdGFdKTsNCg0KICAgICAgICAgICAgaWYgKGlzc2V0KCRvcHRpb25zWydyZXZpc2lvbiddKSAmJiAkb3B0aW9uc1sncmV2aXNpb24nXSkgew0KICAgICAgICAgICAgICAgICR0aGlzLT5hcHAtPmhlbHBlcigncmV2aXNpb25zJyktPmFkZCgkc2luZ2xldG9uWydfaWQnXSwgJGRhdGEsICJzaW5nbGV0b25zL3skc2luZ2xldG9uWyduYW1lJ119IiwgdHJ1ZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiAkZGF0YTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgJ2dldERhdGEnID0+IGZ1bmN0aW9uKCRuYW1lLCAkb3B0aW9ucyA9IFtdKSB7DQoNCiAgICAgICAgaWYgKCRzaW5nbGV0b24gPSAkdGhpcy0+c2luZ2xldG9uKCRuYW1lKSkgew0KDQogICAgICAgICAgICAkb3B0aW9ucyA9IGFycmF5X21lcmdlKFsNCiAgICAgICAgICAgICAgICAndXNlcicgPT4gZmFsc2UsDQogICAgICAgICAgICAgICAgJ3BvcHVsYXRlJyA9PiBmYWxzZSwNCiAgICAgICAgICAgICAgICAnbGFuZycgPT4gZmFsc2UsDQogICAgICAgICAgICAgICAgJ2lnbm9yZURlZmF1bHRGYWxsYmFjaycgPT4gZmFsc2UNCiAgICAgICAgICAgIF0sICRvcHRpb25zKTsNCg0KICAgICAgICAgICAgJGRhdGEgPSAkdGhpcy0+YXBwLT5zdG9yYWdlLT5nZXRLZXkoJ3NpbmdsZXRvbnMnLCAkbmFtZSk7DQoNCiAgICAgICAgICAgIGlmIChpc19udWxsKCRkYXRhKSkgew0KICAgICAgICAgICAgICAgICRkYXRhID0gW107DQogICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRzaW5nbGV0b25bJ2ZpZWxkcyddKSAmJiBpc19hcnJheSgkc2luZ2xldG9uWydmaWVsZHMnXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHNpbmdsZXRvblsnZmllbGRzJ10gYXMgJGYpICRkYXRhWyRmWyduYW1lJ11dID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRkYXRhID0gJHRoaXMtPl9maWx0ZXJGaWVsZHMoJGRhdGEsICRzaW5nbGV0b24sICRvcHRpb25zKTsNCg0KICAgICAgICAgICAgaWYgKCRvcHRpb25zWydwb3B1bGF0ZSddICYmIGZ1bmN0aW9uX2V4aXN0cygnY29ja3BpdF9wb3B1bGF0ZV9jb2xsZWN0aW9uJykpIHsNCg0KICAgICAgICAgICAgICAgICRmaWVsZHNGaWx0ZXIgPSBbXTsNCg0KICAgICAgICAgICAgICAgIGlmICgkb3B0aW9uc1sndXNlciddKSAkZmllbGRzRmlsdGVyWyd1c2VyJ10gPSAkb3B0aW9uc1sndXNlciddOw0KICAgICAgICAgICAgICAgIGlmICgkb3B0aW9uc1snbGFuZyddKSAkZmllbGRzRmlsdGVyWydsYW5nJ10gPSAkb3B0aW9uc1snbGFuZyddOw0KDQogICAgICAgICAgICAgICAgJF9pdGVtcyA9IFskZGF0YV07DQogICAgICAgICAgICAgICAgJF9pdGVtcyA9IGNvY2twaXRfcG9wdWxhdGVfY29sbGVjdGlvbigkX2l0ZW1zLCBpbnR2YWwoJG9wdGlvbnNbJ3BvcHVsYXRlJ10pLCAwLCAkZmllbGRzRmlsdGVyKTsNCiAgICAgICAgICAgICAgICAkZGF0YSA9ICRfaXRlbXNbMF07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoJ3NpbmdsZXRvbi5nZXREYXRhLmFmdGVyJywgWyRzaW5nbGV0b24sICYkZGF0YV0pOw0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigic2luZ2xldG9uLmdldERhdGEuYWZ0ZXIueyRuYW1lfSIsIFskc2luZ2xldG9uLCAmJGRhdGFdKTsNCg0KICAgICAgICAgICAgcmV0dXJuICRkYXRhOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgICdzaW5nbGV0b25zJyA9PiBmdW5jdGlvbigpIHsNCg0KICAgICAgICAkc2luZ2xldG9ucyA9IFtdOw0KDQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5hcHAtPmhlbHBlcigiZnMiKS0+bHMoJyouc2luZ2xldG9uLnBocCcsICcjc3RvcmFnZTpzaW5nbGV0b24nKSBhcyAkcGF0aCkgew0KDQogICAgICAgICAgICAkc3RvcmUgPSBpbmNsdWRlKCRwYXRoLT5nZXRQYXRoTmFtZSgpKTsNCiAgICAgICAgICAgICRzaW5nbGV0b25zWyRzdG9yZVsnbmFtZSddXSA9ICRzdG9yZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkc2luZ2xldG9uczsNCiAgICB9LA0KDQogICAgJ2V4aXN0cycgPT4gZnVuY3Rpb24oJG5hbWUpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5hcHAtPnBhdGgoIiNzdG9yYWdlOnNpbmdsZXRvbi97JG5hbWV9LnNpbmdsZXRvbi5waHAiKTsNCiAgICB9LA0KDQogICAgJ3NpbmdsZXRvbicgPT4gZnVuY3Rpb24oJG5hbWUpIHsNCg0KICAgICAgICBzdGF0aWMgJHNpbmdsZXRvbjsgLy8gY2FjaGUNCg0KICAgICAgICBpZiAoaXNfbnVsbCgkc2luZ2xldG9uKSkgew0KICAgICAgICAgICAgJHNpbmdsZXRvbiA9IFtdOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFpc19zdHJpbmcoJG5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWlzc2V0KCRzaW5nbGV0b25bJG5hbWVdKSkgew0KDQogICAgICAgICAgICAkc2luZ2xldG9uWyRuYW1lXSA9IGZhbHNlOw0KDQogICAgICAgICAgICBpZiAoJHBhdGggPSAkdGhpcy0+ZXhpc3RzKCRuYW1lKSkgew0KICAgICAgICAgICAgICAgICRzaW5nbGV0b25bJG5hbWVdID0gaW5jbHVkZSgkcGF0aCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHNpbmdsZXRvblskbmFtZV07DQogICAgfSwNCg0KICAgICdnZXRGaWVsZFZhbHVlJyA9PiBmdW5jdGlvbigkc2luZ2xldG9uLCAkZmllbGRuYW1lLCAkZGVmYXVsdCA9IG51bGwsICRvcHRpb25zID0gW10pIHsNCg0KICAgICAgICAkZGF0YSA9ICR0aGlzLT5nZXREYXRhKCRzaW5nbGV0b24sICRvcHRpb25zKTsNCg0KICAgICAgICByZXR1cm4gKCRkYXRhICYmIGlzc2V0KCRkYXRhWyRmaWVsZG5hbWVdKSkgPyAkZGF0YVskZmllbGRuYW1lXSA6ICRkZWZhdWx0Ow0KICAgIH0sDQoNCiAgICAnX2ZpbHRlckZpZWxkcycgPT4gZnVuY3Rpb24oJGRhdGEsICRzaW5nbGV0b24sICRmaWx0ZXIpIHsNCg0KICAgICAgICBzdGF0aWMgJGNhY2hlOw0KICAgICAgICBzdGF0aWMgJGxhbmd1YWdlczsNCg0KICAgICAgICBpZiAobnVsbCA9PT0gJGRhdGEpIHsNCiAgICAgICAgICAgIHJldHVybiAkZGF0YTsNCiAgICAgICAgfQ0KDQogICAgICAgICRmaWx0ZXIgPSBhcnJheV9tZXJnZShbDQogICAgICAgICAgICAndXNlcicgPT4gZmFsc2UsDQogICAgICAgICAgICAnbGFuZycgPT4gZmFsc2UsDQogICAgICAgICAgICAnaWdub3JlRGVmYXVsdEZhbGxiYWNrJyA9PiBmYWxzZQ0KICAgICAgICBdLCAkZmlsdGVyKTsNCg0KICAgICAgICBleHRyYWN0KCRmaWx0ZXIpOw0KDQogICAgICAgIGlmIChudWxsID09PSAkY2FjaGUpIHsNCiAgICAgICAgICAgICRjYWNoZSA9IFtdOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG51bGwgPT09ICRsYW5ndWFnZXMpIHsNCg0KICAgICAgICAgICAgJGxhbmd1YWdlcyA9IFtdOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkdGhpcy0+YXBwLT5yZXRyaWV2ZSgnY29uZmlnL2xhbmd1YWdlcycsIFtdKSBhcyAka2V5ID0+ICR2YWwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNfbnVtZXJpYygka2V5KSkgJGtleSA9ICR2YWw7DQogICAgICAgICAgICAgICAgJGxhbmd1YWdlc1tdID0gJGtleTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc19zdHJpbmcoJHNpbmdsZXRvbikpIHsNCiAgICAgICAgICAgICRzaW5nbGV0b24gPSAkdGhpcy0+Y29sbGVjdGlvbigkc2luZ2xldG9uKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghaXNzZXQoJGNhY2hlWyRzaW5nbGV0b25bJ25hbWUnXV0pKSB7DQoNCiAgICAgICAgICAgICRmaWVsZHMgPSBbDQogICAgICAgICAgICAgICAgJ2FjbCcgPT4gW10sDQogICAgICAgICAgICAgICAgJ2xvY2FsaXplJyA9PiBbXQ0KICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgZm9yZWFjaCAoJHNpbmdsZXRvblsiZmllbGRzIl0gYXMgJGZpZWxkKSB7DQoNCiAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGZpZWxkWydhY2wnXSkgJiYgaXNfYXJyYXkoJGZpZWxkWydhY2wnXSkgJiYgY291bnQoJGZpZWxkWydhY2wnXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJGZpZWxkc1snYWNsJ11bJGZpZWxkWyduYW1lJ11dID0gJGZpZWxkWydhY2wnXTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGZpZWxkWydsb2NhbGl6ZSddKSAmJiAkZmllbGRbJ2xvY2FsaXplJ10pIHsNCiAgICAgICAgICAgICAgICAgICAgJGZpZWxkc1snbG9jYWxpemUnXVskZmllbGRbJ25hbWUnXV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGNhY2hlWyRzaW5nbGV0b25bJ25hbWUnXV0gPSAkZmllbGRzOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCR1c2VyICYmIGNvdW50KCRjYWNoZVskc2luZ2xldG9uWyduYW1lJ11dWydhY2wnXSkpIHsNCg0KICAgICAgICAgICAgJGFjbGZpZWxkcyA9ICRjYWNoZVskc2luZ2xldG9uWyduYW1lJ11dWydhY2wnXTsNCg0KICAgICAgICAgICAgZm9yZWFjaCAoJGFjbGZpZWxkcyBhcyAkbmFtZSA9PiAkYWNsKSB7DQoNCiAgICAgICAgICAgICAgICBpZiAoISggaW5fYXJyYXkoJHVzZXJbJ2dyb3VwJ10sICRhY2wpIHx8IGluX2FycmF5KCR1c2VyWydfaWQnXSwgJGFjbCkgKSkgew0KDQogICAgICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWyRuYW1lXSk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50KCRsYW5ndWFnZXMpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRsYW5ndWFnZXMgYXMgJGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGRhdGFbInskbmFtZX1feyRsfSJdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVsieyRuYW1lfV97JGx9Il0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVsieyRuYW1lfV97JGx9X3NsdWciXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRsYW5nICYmIGNvdW50KCRsYW5ndWFnZXMpICYmIGNvdW50KCRjYWNoZVskc2luZ2xldG9uWyduYW1lJ11dWydsb2NhbGl6ZSddKSkgew0KDQogICAgICAgICAgICAkbG9jYWxmaWVsZHMgPSAkY2FjaGVbJHNpbmdsZXRvblsnbmFtZSddXVsnbG9jYWxpemUnXTsNCg0KICAgICAgICAgICAgZm9yZWFjaCAoJGxvY2FsZmllbGRzIGFzICRuYW1lID0+ICRsb2NhbCkgew0KDQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGxhbmd1YWdlcyBhcyAkbCkgew0KDQogICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZGF0YVsieyRuYW1lfV97JGx9Il0pICYmICRkYXRhWyJ7JG5hbWV9X3skbH0iXSAhPT0gJycpIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsID09ICRsYW5nKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZGF0YVskbmFtZV0gPSAkZGF0YVsieyRuYW1lfV97JGx9Il07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGRhdGFbInskbmFtZX1feyRsfV9zbHVnIl0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhWyJ7JG5hbWV9X3NsdWciXSA9ICRkYXRhWyJ7JG5hbWV9X3skbH1fc2x1ZyJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGwgPT0gJGxhbmcgJiYgJGlnbm9yZURlZmF1bHRGYWxsYmFjaykgew0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGlnbm9yZURlZmF1bHRGYWxsYmFjayA9PT0gdHJ1ZSB8fCAoaXNfYXJyYXkoJGlnbm9yZURlZmF1bHRGYWxsYmFjaykgJiYgaW5fYXJyYXkoJG5hbWUsICRpZ25vcmVEZWZhdWx0RmFsbGJhY2spKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhWyRuYW1lXSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVsieyRuYW1lfV97JGx9Il0pOw0KICAgICAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVsieyRuYW1lfV97JGx9X3NsdWciXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRkYXRhOw0KICAgIH0NCg0KXSk7DQoNCi8vIEFDTA0KJGFwcCgiYWNsIiktPmFkZFJlc291cmNlKCdzaW5nbGV0b25zJywgWydjcmVhdGUnLCAnZm9ybScsICdlZGl0JywgJ2RhdGEnLCAnZGVsZXRlJywgJ21hbmFnZSddKTsNCg0KJHRoaXMtPm1vZHVsZSgnc2luZ2xldG9ucycpLT5leHRlbmQoWw0KDQogICAgJ2dldFNpbmdsZXRvbnNJbkdyb3VwJyA9PiBmdW5jdGlvbigkZ3JvdXAgPSBudWxsKSB7DQoNCiAgICAgICAgaWYgKCEkZ3JvdXApIHsNCiAgICAgICAgICAgICRncm91cCA9ICR0aGlzLT5hcHAtPm1vZHVsZSgnY29ja3BpdCcpLT5nZXRHcm91cCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJF9zaW5nbGV0b25zID0gJHRoaXMtPnNpbmdsZXRvbnMoKTsNCiAgICAgICAgJHNpbmdsZXRvbnMgPSBbXTsNCg0KICAgICAgICBpZiAoJHRoaXMtPmFwcC0+bW9kdWxlKCdjb2NrcGl0JyktPmlzU3VwZXJBZG1pbigpKSB7DQogICAgICAgICAgICByZXR1cm4gJF9zaW5nbGV0b25zOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yZWFjaCAoJF9zaW5nbGV0b25zIGFzICRzaW5nbGV0b24gPT4gJG1ldGEpIHsNCg0KICAgICAgICAgICAgaWYgKGlzc2V0KCRtZXRhWydhY2wnXVskZ3JvdXBdWydmb3JtJ10pICYmICRtZXRhWydhY2wnXVskZ3JvdXBdWydmb3JtJ10pIHsNCiAgICAgICAgICAgICAgICAkc2luZ2xldG9uc1skc2luZ2xldG9uXSA9ICRtZXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRzaW5nbGV0b25zOw0KICAgIH0sDQoNCiAgICAnaGFzYWNjZXNzJyA9PiBmdW5jdGlvbigkc2luZ2xldG9uLCAkYWN0aW9uLCAkZ3JvdXAgPSBudWxsKSB7DQoNCiAgICAgICAgJHNpbmdsZXRvbiA9ICR0aGlzLT5zaW5nbGV0b24oJHNpbmdsZXRvbik7DQoNCiAgICAgICAgaWYgKCEkc2luZ2xldG9uKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoISRncm91cCkgew0KICAgICAgICAgICAgJGdyb3VwID0gJHRoaXMtPmFwcC0+bW9kdWxlKCdjb2NrcGl0JyktPmdldEdyb3VwKCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPmFwcC0+bW9kdWxlKCdjb2NrcGl0JyktPmlzU3VwZXJBZG1pbigkZ3JvdXApKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc3NldCgkc2luZ2xldG9uWydhY2wnXVskZ3JvdXBdWyRhY3Rpb25dKSkgew0KICAgICAgICAgICAgcmV0dXJuICRzaW5nbGV0b25bJ2FjbCddWyRncm91cF1bJGFjdGlvbl07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KXSk7DQoNCi8vIFJFU1QNCmlmIChDT0NLUElUX0FQSV9SRVFVRVNUKSB7DQoNCiAgICAkYXBwLT5vbignY29ja3BpdC5yZXN0LmluaXQnLCBmdW5jdGlvbigkcm91dGVzKSB7DQogICAgICAgICRyb3V0ZXNbJ3NpbmdsZXRvbnMnXSA9ICdTaW5nbGV0b25zXFxDb250cm9sbGVyXFxSZXN0QXBpJzsNCiAgICB9KTsNCg0KICAgIC8vIGFsbG93IGFjY2VzcyB0byBwdWJsaWMgY29sbGVjdGlvbnMNCiAgICAkYXBwLT5vbignY29ja3BpdC5hcGkuYXV0aGVudGljYXRlJywgZnVuY3Rpb24oJGRhdGEpIHsNCg0KICAgICAgICBpZiAoJGRhdGFbJ3VzZXInXSB8fCAkZGF0YVsncmVzb3VyY2UnXSAhPSAnc2luZ2xldG9ucycpIHJldHVybjsNCg0KICAgICAgICBpZiAoaXNzZXQoJGRhdGFbJ3F1ZXJ5J11bJ3BhcmFtcyddWzFdKSkgew0KDQogICAgICAgICAgICAkc2luZ2xldG9uID0gJHRoaXMtPm1vZHVsZSgnc2luZ2xldG9ucycpLT5zaW5nbGV0b24oJGRhdGFbJ3F1ZXJ5J11bJ3BhcmFtcyddWzFdKTsNCg0KICAgICAgICAgICAgaWYgKCRzaW5nbGV0b24gJiYgaXNzZXQoJHNpbmdsZXRvblsnYWNsJ11bJ3B1YmxpYyddKSkgew0KICAgICAgICAgICAgICAgICRkYXRhWydhdXRoZW50aWNhdGVkJ10gPSB0cnVlOw0KICAgICAgICAgICAgICAgICRkYXRhWyd1c2VyJ10gPSBbJ19pZCcgPT4gbnVsbCwgJ2dyb3VwJyA9PiAncHVibGljJ107DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsNCn0NCg0KLy8gQURNSU4NCmlmIChDT0NLUElUX0FETUlOX0NQKSB7DQogICAgaW5jbHVkZV9vbmNlKF9fRElSX18uJy9hZG1pbi5waHAnKTsNCn0NCg0KLy8gQ0xJDQppZiAoQ09DS1BJVF9DTEkpIHsNCiAgICAkdGhpcy0+cGF0aCgnI2NsaScsIF9fRElSX18uJy9jbGknKTsNCn0NCiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";