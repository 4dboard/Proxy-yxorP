1689528006
waR3U4bTeM%3Ae37004686a34c18f5e15cd6650044db5-c3db665512c5d698356dc9e4e47f3107
s:19732:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6NDE6IlRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb2NrcGl0IHByb2plY3QuIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjE5NDoiKGMpIEFydHVyIEhlaW56ZSAtIPCfhbDwn4W28J+FtPCfhb3wn4aD8J+FtPCfhbnwn4W+LCBodHRwOi8vYWdlbnRlam8uY29tCgpGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQpmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4iO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImMzZGI2NjU1MTJjNWQ2OTgzNTZkYzllNGU0N2YzMTA3IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTM6ImJvb3RzdHJhcC5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo0NToiYXBwL2xpYi9jb2NrcGl0L21vZHVsZXMvQ29ja3BpdC9ib290c3RyYXAucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxMjgyMDoiPD9waHANCi8qKg0KICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIENvY2twaXQgcHJvamVjdC4NCiAqDQogKiAoYykgQXJ0dXIgSGVpbnplIC0g8J+FsPCfhbbwn4W08J+FvfCfhoPwn4W08J+FufCfhb4sIGh0dHA6Ly9hZ2VudGVqby5jb20NCiAqDQogKiBGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQ0KICogZmlsZSB0aGF0IHdhcyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgc291cmNlIGNvZGUuDQogKi8NCg0KLy8gSGVscGVycw0KDQokdGhpcy0+aGVscGVyc1sncmV2aXNpb25zJ10gID0gJ0NvY2twaXRcXEhlbHBlclxcUmV2aXNpb25zJzsNCiR0aGlzLT5oZWxwZXJzWyd1cGRhdGVyJ10gICAgPSAnQ29ja3BpdFxcSGVscGVyXFxVcGRhdGVyJzsNCiR0aGlzLT5oZWxwZXJzWydhc3luYyddICAgICAgPSAnQ29ja3BpdFxcSGVscGVyXFxBc3luYyc7DQokdGhpcy0+aGVscGVyc1snam9icyddICAgICAgID0gJ0NvY2twaXRcXEhlbHBlclxcSm9icyc7DQoNCi8vIEFQSQ0KJHRoaXMtPm1vZHVsZSgnY29ja3BpdCcpLT5leHRlbmQoWw0KDQogICAgJ21hcmtkb3duJyA9PiBmdW5jdGlvbigkY29udGVudCwgJGV4dHJhID0gZmFsc2UpIHVzZSgkYXBwKSB7DQoNCiAgICAgICAgc3RhdGljICRwYXJzZURvd247DQogICAgICAgIHN0YXRpYyAkcGFyc2Vkb3duRXh0cmE7DQoNCiAgICAgICAgaWYgKCEkZXh0cmEgJiYgISRwYXJzZURvd24pICAgICAgJHBhcnNlRG93biAgICAgID0gbmV3IFxQYXJzZWRvd24oKTsNCiAgICAgICAgaWYgKCRleHRyYSAmJiAhJHBhcnNlZG93bkV4dHJhKSAgJHBhcnNlZG93bkV4dHJhID0gbmV3IFxQYXJzZWRvd25FeHRyYSgpOw0KDQogICAgICAgIHJldHVybiAkZXh0cmEgPyAkcGFyc2Vkb3duRXh0cmEtPnRleHQoJGNvbnRlbnQpIDogJHBhcnNlRG93bi0+dGV4dCgkY29udGVudCk7DQogICAgfSwNCg0KICAgICdjbGVhckNhY2hlJyA9PiBmdW5jdGlvbigpIHVzZSgkYXBwKSB7DQoNCiAgICAgICAgJGRpcnMgPSBbJyNjYWNoZTonLCcjdG1wOicsJyN0aHVtYnM6JywgJyNwc3RvcmFnZTp0bXAnXTsNCg0KICAgICAgICBmb3JlYWNoIChhcnJheV91bmlxdWUoJGRpcnMpIGFzICYkZGlyKSB7DQogICAgICAgICAgICAkZGlyID0gJHRoaXMtPmFwcC0+cGF0aCgkZGlyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCRkaXJzIGFzICRkaXIpIHsNCg0KICAgICAgICAgICAgJHBhdGggPSAkYXBwLT5wYXRoKCRkaXIpOw0KICAgICAgICAgICAgJGZpbGVzID0gbmV3IFxSZWN1cnNpdmVJdGVyYXRvckl0ZXJhdG9yKG5ldyBcUmVjdXJzaXZlRGlyZWN0b3J5SXRlcmF0b3IoJHBhdGgpLCBcUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcjo6U0VMRl9GSVJTVCk7DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgew0KDQogICAgICAgICAgICAgICAgaWYgKCEkZmlsZS0+aXNGaWxlKCkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGlmIChwcmVnX21hdGNoKCcvKFwuZ2l0a2VlcHxcLmdpdGlnbm9yZXxpbmRleFwuaHRtbCkkLycsICRmaWxlKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICBAdW5saW5rKCRmaWxlLT5nZXRSZWFsUGF0aCgpKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGFwcC0+aGVscGVyKCdmcycpLT5yZW1vdmVFbXB0eVN1YkZvbGRlcnMoJHBhdGgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJGFwcC0+dHJpZ2dlcignY29ja3BpdC5jbGVhcmNhY2hlJyk7DQoNCiAgICAgICAgJHNpemUgPSAwOw0KDQogICAgICAgIGZvcmVhY2ggKCRkaXJzIGFzICRkaXIpIHsNCiAgICAgICAgICAgICRzaXplICs9ICRhcHAtPmhlbHBlcignZnMnKS0+Z2V0RGlyU2l6ZSgkZGlyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ29wY2FjaGVfcmVzZXQnKSkgew0KICAgICAgICAgICAgb3BjYWNoZV9yZXNldCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIFsnc2l6ZSc9PiRhcHAtPmhlbHBlcigndXRpbHMnKS0+Zm9ybWF0U2l6ZSgkc2l6ZSldOw0KICAgIH0sDQoNCiAgICAnbG9hZEFwaUtleXMnID0+IGZ1bmN0aW9uKCkgew0KDQogICAgICAgICRrZXlzICAgICAgPSBbICdtYXN0ZXInID0+ICcnLCAnc3BlY2lhbCcgPT4gW10gXTsNCiAgICAgICAgJGNvbnRhaW5lciA9ICR0aGlzLT5hcHAtPnBhdGgoJyNzdG9yYWdlOicpLicvYXBpLmtleXMucGhwJzsNCg0KICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGNvbnRhaW5lcikpIHsNCg0KICAgICAgICAgICAgJGRhdGEgPSBpbmNsdWRlKCRjb250YWluZXIpOw0KICAgICAgICAgICAgJGRhdGEgPSBAdW5zZXJpYWxpemUoJHRoaXMtPmFwcC0+ZGVjb2RlKCRkYXRhLCAkdGhpcy0+YXBwWydzZWMta2V5J10pKTsNCg0KICAgICAgICAgICAgaWYgKCRkYXRhICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICRrZXlzID0gYXJyYXlfbWVyZ2UoJGtleXMsICRkYXRhKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGtleXMgPSAkdGhpcy0+YXBwLT5zdG9yYWdlLT5nZXRLZXkoJ2NvY2twaXQnLCAnYXBpX2tleXMnLCAka2V5cyk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGtleXM7DQogICAgfSwNCg0KICAgICdzYXZlQXBpS2V5cycgPT4gZnVuY3Rpb24oJGRhdGEpIHsNCg0KICAgICAgICAkZGF0YSA9IGFycmF5X21lcmdlKFsgJ21hc3RlcicgPT4gJycsICdzcGVjaWFsJyA9PiBbXSBdLCAoYXJyYXkpJGRhdGEpOw0KDQogICAgICAgICR0aGlzLT5hcHAtPnN0b3JhZ2UtPnNldEtleSgnY29ja3BpdCcsICdhcGlfa2V5cycsICRkYXRhKTsNCg0KICAgICAgICAvLyBjYWNoZQ0KICAgICAgICAkc2VyaWFsaXplZCA9IHNlcmlhbGl6ZSgkZGF0YSk7DQogICAgICAgICRleHBvcnQgICAgID0gdmFyX2V4cG9ydCgkdGhpcy0+YXBwLT5lbmNvZGUoJHNlcmlhbGl6ZWQsICR0aGlzLT5hcHBbInNlYy1rZXkiXSksIHRydWUpOw0KICAgICAgICAkY29udGFpbmVyICA9ICR0aGlzLT5hcHAtPnBhdGgoJyNzdG9yYWdlOicpLicvYXBpLmtleXMucGhwJzsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT53cml0ZSgkY29udGFpbmVyLCAiPD9waHBcbiByZXR1cm4geyRleHBvcnR9OyIpOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiBHZW5lcmF0ZSB0aHVtYm5haWwNCiAgICAgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgew0KICAgICAqICAgQHZhciBzdHJpbmcgW2NhY2hlZm9sZGVyPXRodW1iczovL10gLSBDYWNoZSBmb2xkZXINCiAgICAgKiAgIEB2YXIgc3RyaW5nICRzb3VyY2UgLSBTb3VyY2UgZmlsZSBwYXRoDQogICAgICogICBAdmFyIHN0cmluZyBbJG1vZGU9dGh1bWJuYWlsXSAtIE9uZSBvZiB0aHVtYm5haWx8YmVzdEZpdHxyZXNpemV8Zml0VG9XaWR0aHxmaXRUb0hlaWdodA0KICAgICAqICAgQHZhciBzdHJpbmcgWyRmcF0gLSBQb3NpdGlvbg0KICAgICAqICAgQHZhciBhcnJheSBbJGZpbHRlcnNdIC0gQXNzb2NpYXRpdmUgYXJyYXkgb2YgZmlsdGVycyBhbmQgaXQncyBvcHRpb25zOiBbJ3NlcGlhJywgJ3NoYXJwZW4nXQ0KICAgICAqICAgQHZhciBpbnRlZ2VyIFskd2lkdGhdIC0gT3V0cHV0IHdpZHRoDQogICAgICogICBAdmFyIGludGVnZXIgWyRoZWlnaHRdIC0gT3V0cHV0IGhlaWdodA0KICAgICAqICAgQHZhciBpbnRlZ2VyIFskcXVhbGl0eT0xMDBdIC0gT3V0cHV0IHF1YWxpdHkNCiAgICAgKiAgIEB2YXIgYm9vbGVhbiBbJHJlYnVpbGQ9ZmFsc2VdIC0gRm9yY2UgaW1hZ2UgcmVidWlsZA0KICAgICAqICAgQHZhciBib29sZWFuIFskYmFzZTY0PWZhbHNlXSAtIEJhc2U2NCBvdXRwdXQNCiAgICAgKiAgIEB2YXIgYm9vbGVhbiBbJG91dHB1dD1mYWxzZV0gLSBFY2hvIHJlc3BvbnNlIGFuZCBleGl0IGFwcGxpY2F0aW9uDQogICAgICogfQ0KICAgICAqIEByZXR1cm4gc3RyaW5nIFVSTCB0byBmaWxlIG9yIEJhc2U2NCBvdXRwdXQNCiAgICAgKi8NCiAgICAndGh1bWJuYWlsJyA9PiBmdW5jdGlvbigkb3B0aW9ucykgew0KDQogICAgICAgICRvcHRpb25zID0gYXJyYXlfbWVyZ2UoWw0KICAgICAgICAgICAgJ2NhY2hlZm9sZGVyJyA9PiAndGh1bWJzOi8vJywNCiAgICAgICAgICAgICdzcmMnID0+ICcnLA0KICAgICAgICAgICAgJ21vZGUnID0+ICd0aHVtYm5haWwnLA0KICAgICAgICAgICAgJ21pbWUnID0+IG51bGwsDQogICAgICAgICAgICAnZnAnID0+IG51bGwsDQogICAgICAgICAgICAnZmlsdGVycycgPT4gW10sDQogICAgICAgICAgICAnd2lkdGgnID0+IGZhbHNlLA0KICAgICAgICAgICAgJ2hlaWdodCcgPT4gZmFsc2UsDQogICAgICAgICAgICAncXVhbGl0eScgPT4gMTAwLA0KICAgICAgICAgICAgJ3JlYnVpbGQnID0+IGZhbHNlLA0KICAgICAgICAgICAgJ2Jhc2U2NCcgPT4gZmFsc2UsDQogICAgICAgICAgICAnb3V0cHV0JyA9PiBmYWxzZSwNCiAgICAgICAgICAgICdyZWRpcmVjdCcgPT4gZmFsc2UsDQogICAgICAgIF0sICRvcHRpb25zKTsNCg0KICAgICAgICBleHRyYWN0KCRvcHRpb25zKTsNCg0KICAgICAgICBpZiAoISR3aWR0aCAmJiAhJGhlaWdodCkgew0KICAgICAgICAgICAgcmV0dXJuIFsnZXJyb3InID0+ICdUYXJnZXQgd2lkdGggb3IgaGVpZ2h0IHBhcmFtZXRlciBpcyBtaXNzaW5nJ107DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoISRzcmMpIHsNCiAgICAgICAgICAgIHJldHVybiBbJ2Vycm9yJyA9PiAnTWlzc2luZyBzcmMgcGFyYW1ldGVyJ107DQogICAgICAgIH0NCg0KICAgICAgICAkc3JjICAgPSBzdHJfcmVwbGFjZSgnLi4vJywgJycsIHJhd3VybGRlY29kZSgkc3JjKSk7DQogICAgICAgICRhc3NldCA9IG51bGw7DQoNCiAgICAgICAgLy8gaXMgYXNzZXQ/DQogICAgICAgIGlmIChzdHJwb3MoJHNyYywgJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFVybCgnYXNzZXRzOi8vJykpID09PSAwKSB7DQoNCiAgICAgICAgICAgICRwYXRoID0gdHJpbShzdHJfcmVwbGFjZShydHJpbSgkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+Z2V0VXJsKCdhc3NldHM6Ly8nKSwgJy8nKSwgJycsICRzcmMpLCAnLycpOw0KDQogICAgICAgICAgICB0cnkgew0KDQogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5hcHAtPmZpbGVzdG9yYWdlLT5oYXMoJ2Fzc2V0czovLycuJHBhdGgpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgJGFzc2V0ID0gJHRoaXMtPmFwcC0+c3RvcmFnZS0+ZmluZE9uZSgnY29ja3BpdC9hc3NldHMnLCBbJ3BhdGgnID0+ICIveyRwYXRofSJdKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoISRhc3NldCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGFzc2V0ID0gWydwYXRoJyA9PiAiL3skcGF0aH0iXTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzcmM7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChcRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICRzcmM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSBlbHNlaWYgKCFwcmVnX21hdGNoKCcvXC4ocG5nfGpwZ3xqcGVnfGdpZnxzdmd8d2VicCkkL2knLCAkc3JjKSkgew0KICAgICAgICAgICAgJGFzc2V0ID0gJHRoaXMtPmFwcC0+c3RvcmFnZS0+ZmluZE9uZSgnY29ja3BpdC9hc3NldHMnLCBbJ19pZCcgPT4gJHNyY10pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRhc3NldCkgew0KDQogICAgICAgICAgICAkYXNzZXRbJ3BhdGgnXSA9IHRyaW0oJGFzc2V0WydwYXRoJ10sICcvJyk7DQogICAgICAgICAgICAkc3JjID0gJHRoaXMtPmFwcC0+cGF0aCgiI3VwbG9hZHM6eyRhc3NldFsncGF0aCddfSIpOw0KDQogICAgICAgICAgICBpZiAoISRzcmMgJiYgJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmhhcygnYXNzZXRzOi8vJy4kYXNzZXRbJ3BhdGgnXSkpIHsNCg0KICAgICAgICAgICAgICAgICRzdHJlYW0gPSAkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+cmVhZFN0cmVhbSgnYXNzZXRzOi8vJy4kYXNzZXRbJ3BhdGgnXSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoJHN0cmVhbSkgew0KICAgICAgICAgICAgICAgICAgICR0aGlzLT5hcHAtPmZpbGVzdG9yYWdlLT53cml0ZVN0cmVhbSgndXBsb2FkczovLycuJGFzc2V0WydwYXRoJ10sICRzdHJlYW0pOw0KICAgICAgICAgICAgICAgICAgICRzcmMgPSAkdGhpcy0+YXBwLT5wYXRoKCIjdXBsb2Fkczp7JGFzc2V0WydwYXRoJ119Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJHNyYykgew0KICAgICAgICAgICAgICAgICRzcmMgPSBzdHJfcmVwbGFjZShDT0NLUElUX1NJVEVfRElSLCAnJywgJHNyYyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpc3NldCgkYXNzZXRbJ2ZwJ10pICYmICEkZnApIHsNCiAgICAgICAgICAgICAgICAkZnAgPSAkYXNzZXRbJ2ZwJ11bJ3gnXS4nICcuJGFzc2V0WydmcCddWyd5J107DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHNyYykgew0KDQogICAgICAgICAgICAkcGF0aCA9IHRyaW0oc3RyX3JlcGxhY2UocnRyaW0oJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFVybCgnc2l0ZTovLycpLCAnLycpLCAnJywgJHNyYyksICcvJyk7DQoNCiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cyhDT0NLUElUX1NJVEVfRElSLicvJy4kcGF0aCkpIHsNCiAgICAgICAgICAgICAgICAkc3JjID0gQ09DS1BJVF9TSVRFX0RJUi4nLycuJHBhdGg7DQogICAgICAgICAgICB9IGVsc2VpZiAoZmlsZV9leGlzdHMoQ09DS1BJVF9ET0NTX1JPT1QuJy8nLiRwYXRoKSkgew0KICAgICAgICAgICAgICAgICRzcmMgPSBDT0NLUElUX0RPQ1NfUk9PVC4nLycuJHBhdGg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkcGF0aCAgPSAkdGhpcy0+YXBwLT5wYXRoKCRzcmMpOw0KICAgICAgICAkZXh0ICAgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRwYXRoLCBQQVRISU5GT19FWFRFTlNJT04pKTsNCg0KICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRwYXRoKSB8fCBpc19kaXIoJHBhdGgpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBoYW5kbGUgc3ZnIGZpbGVzDQogICAgICAgIGlmICgkZXh0ID09ICdzdmcnKSB7DQoNCiAgICAgICAgICAgIGlmICgkYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcuYmFzZTY0X2VuY29kZShmaWxlX2dldF9jb250ZW50cygkcGF0aCkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJG91dHB1dCkgew0KICAgICAgICAgICAgICAgIGhlYWRlcignQ29udGVudC1UeXBlOiBpbWFnZS9zdmcreG1sJyk7DQogICAgICAgICAgICAgICAgaGVhZGVyKCdDb250ZW50LUxlbmd0aDogJy5maWxlc2l6ZSgkcGF0aCkpOw0KICAgICAgICAgICAgICAgIGVjaG8gZmlsZV9nZXRfY29udGVudHMoJHBhdGgpOw0KICAgICAgICAgICAgICAgICR0aGlzLT5hcHAtPnN0b3AoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5hcHAtPnBhdGhUb1VybCgkcGF0aCwgdHJ1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWluX2FycmF5KCRleHQsIFsncG5nJywnanBnJywnanBlZycsJ2dpZicsICd3ZWJwJ10pKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+cGF0aFRvVXJsKCRwYXRoLCB0cnVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJHdpZHRoIHx8ICEkaGVpZ2h0IHx8ICR3aWR0aCA9PSAnb3JpZ2luYWwnIHx8ICRoZWlnaHQgPT0gJ29yaWdpbmFsJykgew0KDQogICAgICAgICAgICBsaXN0KCR3LCAkaCwgJHR5cGUsICRhdHRyKSAgPSBnZXRpbWFnZXNpemUoJHBhdGgpOw0KDQogICAgICAgICAgICBpZiAoJHdpZHRoID09ICdvcmlnaW5hbCcpICR3aWR0aCA9ICR3Ow0KICAgICAgICAgICAgaWYgKCRoZWlnaHQgPT0gJ29yaWdpbmFsJykgJGhlaWdodCA9ICRoOw0KDQogICAgICAgICAgICBpZiAoISR3aWR0aCkgJHdpZHRoID0gY2VpbCgkdyAqICgkaGVpZ2h0LyRoKSk7DQogICAgICAgICAgICBpZiAoISRoZWlnaHQpICRoZWlnaHQgPSBjZWlsKCRoICogKCR3aWR0aC8kdykpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzX251bGwoJHdpZHRoKSAmJiBpc19udWxsKCRoZWlnaHQpKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+cGF0aFRvVXJsKCRwYXRoLCB0cnVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJGZwKSB7DQogICAgICAgICAgICAkZnAgPSAnY2VudGVyJzsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghaW5fYXJyYXkoJG1vZGUsIFsndGh1bWJuYWlsJywgJ2Jlc3RGaXQnLCAncmVzaXplJywnZml0VG9XaWR0aCcsJ2ZpdFRvSGVpZ2h0J10pKSB7DQogICAgICAgICAgICAkbW9kZSA9ICd0aHVtYm5haWwnOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRtaW1lKSB7DQoNCiAgICAgICAgICAgIGlmIChpbl9hcnJheSgkbWltZSwgWydpbWFnZS9naWYnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCdpbWFnZS93ZWJwJywnaW1hZ2UvYm1wJ10pKSB7DQogICAgICAgICAgICAgICAgJGV4dCA9IGV4cGxvZGUoJy8nLCAkbWltZSlbMV07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICRtaW1lID0gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRtZXRob2QgPSAkbW9kZSA9PSAnY3JvcCcgPyAndGh1bWJuYWlsJyA6ICRtb2RlOw0KDQogICAgICAgICRmaWxldGltZSA9IGZpbGVtdGltZSgkcGF0aCk7DQogICAgICAgICRoYXNoID0gbWQ1KCRwYXRoLmpzb25fZW5jb2RlKCRvcHRpb25zKSkuIl97JHdpZHRofXh7JGhlaWdodH1feyRxdWFsaXR5fV97JGZpbGV0aW1lfV97JG1vZGV9XyIubWQ1KCRmcCkuIi57JGV4dH0iOw0KICAgICAgICAkdGh1bWJwYXRoID0gJGNhY2hlZm9sZGVyLiIveyRoYXNofSI7DQoNCiAgICAgICAgaWYgKCRyZWJ1aWxkIHx8ICEkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+aGFzKCR0aHVtYnBhdGgpKSB7DQoNCiAgICAgICAgICAgIHRyeSB7DQoNCiAgICAgICAgICAgICAgICBpZiAoJHJlYnVpbGQgJiYgJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmhhcygkdGh1bWJwYXRoKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+ZGVsZXRlKCR0aHVtYnBhdGgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICRpbWcgPSAkdGhpcy0+YXBwLT5oZWxwZXIoImltYWdlIiktPnRha2UoJHBhdGgpLT57JG1ldGhvZH0oJHdpZHRoLCAkaGVpZ2h0LCAkZnApOw0KDQogICAgICAgICAgICAgICAgJF9maWx0ZXJzID0gWw0KICAgICAgICAgICAgICAgICAgICAnYmx1cicsICdicmlnaHRlbicsDQogICAgICAgICAgICAgICAgICAgICdjb2xvcml6ZScsICdjb250cmFzdCcsDQogICAgICAgICAgICAgICAgICAgICdkYXJrZW4nLCAnZGVzYXR1cmF0ZScsDQogICAgICAgICAgICAgICAgICAgICdlZGdlRGV0ZWN0JywgJ2VtYm9zcycsDQogICAgICAgICAgICAgICAgICAgICdmbGlwJywgJ2ludmVydCcsICdvcGFjaXR5JywgJ3BpeGVsYXRlJywgJ3NlcGlhJywgJ3NoYXJwZW4nLCAnc2tldGNoJw0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICAvLyBBcHBseSBzaW5nbGUgZmlsdGVyDQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJF9maWx0ZXJzIGFzICRmKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRvcHRpb25zWyRmXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRpbWctPnskZn0oJG9wdGlvbnNbJGZdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEFwcGx5IG11bHRpcGxlIGZpbHRlcnMNCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkZmlsdGVycyBhcyAkZmlsdGVyTmFtZSA9PiAkZmlsdGVyT3B0aW9ucykgew0KICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbm9uLWFzc29jaWF0aXZlIGFycmF5DQogICAgICAgICAgICAgICAgICAgIGlmIChpc19pbnQoJGZpbHRlck5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkZmlsdGVyTmFtZSA9ICRmaWx0ZXJPcHRpb25zOw0KICAgICAgICAgICAgICAgICAgICAgICAgJGZpbHRlck9wdGlvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheSgkZmlsdGVyTmFtZSwgJF9maWx0ZXJzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbF91c2VyX2Z1bmNfYXJyYXkoWyRpbWcsICRmaWx0ZXJOYW1lXSwgKGFycmF5KSAkZmlsdGVyT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+d3JpdGUoJHRodW1icGF0aCwgJGltZy0+dG9TdHJpbmcoJG1pbWUsICRxdWFsaXR5KSk7DQoNCiAgICAgICAgICAgICAgICB1bnNldCgkaW1nKTsNCg0KICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gJGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSkVBQUFBQUFQLy8vLy8vL3dBQUFDSDVCQUVIQUFJQUxBQUFBQUFCQUFFQUFBSUNWQUVBT3c9PSI7IC8vIHRyYW5zcGFyZW50IDFweCBnaWYNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkYmFzZTY0KSB7DQogICAgICAgICAgICByZXR1cm4gImRhdGE6aW1hZ2UveyRleHR9O2Jhc2U2NCwiLmJhc2U2NF9lbmNvZGUoJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPnJlYWQoJHRodW1icGF0aCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRvdXRwdXQpIHsNCg0KICAgICAgICAgICAgaWYgKCRvdXRwdXQgPT0gJ3JlZGlyZWN0Jykgew0KICAgICAgICAgICAgICAgICR0aGlzLT5hcHAtPnJlcm91dGUoJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFVSTCgkdGh1bWJwYXRoKSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGhlYWRlcigiQ29udGVudC1UeXBlOiBpbWFnZS97JGV4dH0iKTsNCiAgICAgICAgICAgIGhlYWRlcignQ29udGVudC1MZW5ndGg6ICcuJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFNpemUoJHRodW1icGF0aCkpOw0KICAgICAgICAgICAgZWNobyAkdGhpcy0+YXBwLT5maWxlc3RvcmFnZS0+cmVhZCgkdGh1bWJwYXRoKTsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnN0b3AoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkcmVkaXJlY3QpIHsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnJlcm91dGUoJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFVSTCgkdGh1bWJwYXRoKSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+ZmlsZXN0b3JhZ2UtPmdldFVSTCgkdGh1bWJwYXRoKTsNCiAgICB9DQpdKTsNCg0KDQovLyBBZGRpdGlvbmFsIG1vZHVsZSBBcGkNCmluY2x1ZGVfb25jZShfX0RJUl9fLicvbW9kdWxlL2F1dGgucGhwJyk7DQppbmNsdWRlX29uY2UoX19ESVJfXy4nL21vZHVsZS9hc3NldHMucGhwJyk7DQoNCg0KLy8gQURNSU4NCmlmIChDT0NLUElUX0FETUlOX0NQKSB7DQoNCiAgICBpbmNsdWRlX29uY2UoX19ESVJfXy4nL2FkbWluLnBocCcpOw0KDQogICAgJHRoaXMtPmJpbmQoJy9jb2NrcGl0LWFwaS5qcycsIGZ1bmN0aW9uKCkgew0KDQogICAgICAgICR0b2tlbiA9ICR0aGlzLT5wYXJhbSgndG9rZW4nLCAnJyk7DQogICAgICAgICR0aGlzLT5yZXNwb25zZS0+bWltZSA9ICdqcyc7DQoNCiAgICAgICAgJGFwaXVybCA9ICgkdGhpcy0+cmVxdWVzdC0+aXMoJ3NzbCcpID8gJ2h0dHBzJzonaHR0cCcpLic6Ly8nOw0KDQogICAgICAgIGlmICghaW5fYXJyYXkoJHRoaXMtPnJlZ2lzdHJ5WydiYXNlX3BvcnQnXSwgWyc4MCcsICc0NDMnXSkpIHsNCiAgICAgICAgICAgICRhcGl1cmwgLj0gJHRoaXMtPnJlZ2lzdHJ5WydiYXNlX2hvc3QnXS4iOiIuJHRoaXMtPnJlZ2lzdHJ5WydiYXNlX3BvcnQnXTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRhcGl1cmwgLj0gJHRoaXMtPnJlZ2lzdHJ5WydiYXNlX2hvc3QnXTsNCiAgICAgICAgfQ0KDQogICAgICAgICRhcGl1cmwgLj0gJHRoaXMtPnJvdXRlVXJsKCcvYXBpJyk7DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT52aWV3KCdjb2NrcGl0OnZpZXdzL2FwaS5qcycsIGNvbXBhY3QoJ3Rva2VuJywgJ2FwaXVybCcpKTsNCiAgICB9KTsNCn0NCg0KLy8gQ0xJDQppZiAoQ09DS1BJVF9DTEkpIHsNCiAgICAkdGhpcy0+cGF0aCgnI2NsaScsIF9fRElSX18uJy9jbGknKTsNCn0NCg0KLy8gV0VCSE9PS1MNCmlmICghZGVmaW5lZCgnQ09DS1BJVF9JTlNUQUxMJykpIHsNCiAgICBpbmNsdWRlX29uY2UoX19ESVJfXy4nL3dlYmhvb2tzLnBocCcpOw0KfQ0KDQovLyBSRVNUDQppZiAoQ09DS1BJVF9BUElfUkVRVUVTVCkgew0KDQogICAgLy8gSU5JVCBSRVNUIEFQSSBIQU5ETEVSDQogICAgaW5jbHVkZV9vbmNlKF9fRElSX18uJy9yZXN0LWFwaS5waHAnKTsNCg0KICAgICR0aGlzLT5vbignY29ja3BpdC5yZXN0LmluaXQnLCBmdW5jdGlvbigkcm91dGVzKSB7DQogICAgICAgICRyb3V0ZXNbJ2NvY2twaXQnXSA9ICdDb2NrcGl0XFxDb250cm9sbGVyXFxSZXN0QXBpJzsNCiAgICB9KTsNCn0NCiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";