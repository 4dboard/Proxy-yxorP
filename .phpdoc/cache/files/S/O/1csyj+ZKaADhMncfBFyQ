1689528007
waR3U4bTeM%3A7d9b8ff0ff346b8554acdb5ffaea61a1-078510fee096ef4cb517b69abc3bcce8
s:19240:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6NDE6IlRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb2NrcGl0IHByb2plY3QuIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjE5NDoiKGMpIEFydHVyIEhlaW56ZSAtIPCfhbDwn4W28J+FtPCfhb3wn4aD8J+FtPCfhbnwn4W+LCBodHRwOi8vYWdlbnRlam8uY29tCgpGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQpmaWxlIHRoYXQgd2FzIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBzb3VyY2UgY29kZS4iO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjA3ODUxMGZlZTA5NmVmNGNiNTE3YjY5YWJjM2JjY2U4IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTM6ImJvb3RzdHJhcC5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo0ODoiYXBwL2xpYi9jb2NrcGl0L21vZHVsZXMvU2luZ2xldG9ucy9ib290c3RyYXAucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxMjQ1MDoiPD9waHANCi8qKg0KICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIENvY2twaXQgcHJvamVjdC4NCiAqDQogKiAoYykgQXJ0dXIgSGVpbnplIC0g8J+FsPCfhbbwn4W08J+FvfCfhoPwn4W08J+FufCfhb4sIGh0dHA6Ly9hZ2VudGVqby5jb20NCiAqDQogKiBGb3IgdGhlIGZ1bGwgY29weXJpZ2h0IGFuZCBsaWNlbnNlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlldyB0aGUgTElDRU5TRQ0KICogZmlsZSB0aGF0IHdhcyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgc291cmNlIGNvZGUuDQogKi8NCg0KJHRoaXMtPm1vZHVsZSgnc2luZ2xldG9ucycpLT5leHRlbmQoWw0KDQogICAgJ2NyZWF0ZVNpbmdsZXRvbicgPT4gZnVuY3Rpb24oJG5hbWUsICRkYXRhID0gW10pIHsNCg0KICAgICAgICBpZiAoIXRyaW0oJG5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkY29uZmlncGF0aCA9ICR0aGlzLT5hcHAtPnBhdGgoJyNzdG9yYWdlOicpLicvc2luZ2xldG9uJzsNCg0KICAgICAgICBpZiAoISR0aGlzLT5hcHAtPnBhdGgoJyNzdG9yYWdlOnNpbmdsZXRvbicpKSB7DQoNCiAgICAgICAgICAgIGlmICghJHRoaXMtPmFwcC0+aGVscGVyKCdmcycpLT5ta2RpcigkY29uZmlncGF0aCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPmV4aXN0cygkbmFtZSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0aW1lID0gdGltZSgpOw0KDQogICAgICAgICRzaW5nbGV0b24gPSBhcnJheV9yZXBsYWNlX3JlY3Vyc2l2ZShbDQogICAgICAgICAgICAnbmFtZScgICAgICA9PiAkbmFtZSwNCiAgICAgICAgICAgICdsYWJlbCcgICAgID0+ICRuYW1lLA0KICAgICAgICAgICAgJ19pZCcgICAgICAgPT4gJG5hbWUsDQogICAgICAgICAgICAnZmllbGRzJyAgICA9PiBbXSwNCiAgICAgICAgICAgICdkYXRhJyAgICAgID0+IG51bGwsDQogICAgICAgICAgICAnX2NyZWF0ZWQnICA9PiAkdGltZSwNCiAgICAgICAgICAgICdfbW9kaWZpZWQnID0+ICR0aW1lDQogICAgICAgIF0sICRkYXRhKTsNCg0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCdzaW5nbGV0b24uc2F2ZS5iZWZvcmUnLCBbJHNpbmdsZXRvbl0pOw0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uc2F2ZS5iZWZvcmUueyRuYW1lfSIsIFskc2luZ2xldG9uXSk7DQoNCiAgICAgICAgJGV4cG9ydCA9IHZhcl9leHBvcnQoJHNpbmdsZXRvbiwgdHJ1ZSk7DQoNCiAgICAgICAgaWYgKCEkdGhpcy0+YXBwLT5oZWxwZXIoJ2ZzJyktPndyaXRlKCIjc3RvcmFnZTpzaW5nbGV0b24veyRuYW1lfS5zaW5nbGV0b24ucGhwIiwgIjw/cGhwXG4gcmV0dXJuIHskZXhwb3J0fTsiKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmUuYWZ0ZXInLCBbJHNpbmdsZXRvbl0pOw0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uc2F2ZS5hZnRlci57JG5hbWV9IiwgWyRzaW5nbGV0b25dKTsNCg0KICAgICAgICByZXR1cm4gJHNpbmdsZXRvbjsNCiAgICB9LA0KDQogICAgJ3VwZGF0ZVNpbmdsZXRvbicgPT4gZnVuY3Rpb24oJG5hbWUsICRkYXRhKSB7DQoNCiAgICAgICAgJG1ldGFwYXRoID0gJHRoaXMtPmFwcC0+cGF0aCgiI3N0b3JhZ2U6c2luZ2xldG9uL3skbmFtZX0uc2luZ2xldG9uLnBocCIpOw0KDQogICAgICAgIGlmICghJG1ldGFwYXRoKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkZGF0YVsnX21vZGlmaWVkJ10gPSB0aW1lKCk7DQoNCiAgICAgICAgJHNpbmdsZXRvbiAgPSBpbmNsdWRlKCRtZXRhcGF0aCk7DQogICAgICAgICRzaW5nbGV0b24gID0gYXJyYXlfbWVyZ2UoJHNpbmdsZXRvbiwgJGRhdGEpOw0KDQoNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmUuYmVmb3JlJywgWyRzaW5nbGV0b25dKTsNCiAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcigic2luZ2xldG9uLnNhdmUuYmVmb3JlLnskbmFtZX0iLCBbJHNpbmdsZXRvbl0pOw0KDQogICAgICAgICRleHBvcnQgID0gdmFyX2V4cG9ydCgkc2luZ2xldG9uLCB0cnVlKTsNCg0KICAgICAgICBpZiAoISR0aGlzLT5hcHAtPmhlbHBlcignZnMnKS0+d3JpdGUoJG1ldGFwYXRoLCAiPD9waHBcbiByZXR1cm4geyRleHBvcnR9OyIpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCdzaW5nbGV0b24uc2F2ZS5hZnRlcicsIFskc2luZ2xldG9uXSk7DQogICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoInNpbmdsZXRvbi5zYXZlLmFmdGVyLnskbmFtZX0iLCBbJHNpbmdsZXRvbl0pOw0KDQogICAgICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ29wY2FjaGVfcmVzZXQnKSkgb3BjYWNoZV9yZXNldCgpOw0KDQogICAgICAgIHJldHVybiAkc2luZ2xldG9uOw0KICAgIH0sDQoNCiAgICAnc2F2ZVNpbmdsZXRvbicgPT4gZnVuY3Rpb24oJG5hbWUsICRkYXRhKSB7DQoNCiAgICAgICAgaWYgKCF0cmltKCRuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGlzc2V0KCRkYXRhWydfaWQnXSkgPyAkdGhpcy0+dXBkYXRlU2luZ2xldG9uKCRuYW1lLCAkZGF0YSkgOiAkdGhpcy0+Y3JlYXRlU2luZ2xldG9uKCRuYW1lLCAkZGF0YSk7DQogICAgfSwNCg0KICAgICdyZW1vdmVTaW5nbGV0b24nID0+IGZ1bmN0aW9uKCRuYW1lKSB7DQoNCiAgICAgICAgaWYgKCRzaW5nbGV0b24gPSAkdGhpcy0+c2luZ2xldG9uKCRuYW1lKSkgew0KDQogICAgICAgICAgICAkdGhpcy0+YXBwLT5oZWxwZXIoJ2ZzJyktPmRlbGV0ZSgiI3N0b3JhZ2U6c2luZ2xldG9uL3skbmFtZX0uc2luZ2xldG9uLnBocCIpOw0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+c3RvcmFnZS0+cmVtb3ZlS2V5KCdzaW5nbGV0b25zJywgJG5hbWUpOw0KDQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCdzaW5nbGV0b24ucmVtb3ZlJywgWyRzaW5nbGV0b25dKTsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoInNpbmdsZXRvbi5yZW1vdmUueyRuYW1lfSIsIFskc2luZ2xldG9uXSk7DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICAnc2F2ZURhdGEnID0+IGZ1bmN0aW9uKCRuYW1lLCAkZGF0YSwgJG9wdGlvbnMgPSBbXSkgew0KDQogICAgICAgIGlmICgkc2luZ2xldG9uID0gJHRoaXMtPnNpbmdsZXRvbigkbmFtZSkpIHsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmVEYXRhLmJlZm9yZScsIFskc2luZ2xldG9uLCAmJGRhdGFdKTsNCiAgICAgICAgICAgICR0aGlzLT5hcHAtPnRyaWdnZXIoInNpbmdsZXRvbi5zYXZlRGF0YS5iZWZvcmUueyRuYW1lfSIsIFskc2luZ2xldG9uLCAmJGRhdGFdKTsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+c3RvcmFnZS0+c2V0S2V5KCdzaW5nbGV0b25zJywgJG5hbWUsICRkYXRhKTsNCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLnNhdmVEYXRhLmFmdGVyJywgWyRzaW5nbGV0b24sICRkYXRhXSk7DQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uc2F2ZURhdGEuYWZ0ZXIueyRuYW1lfSIsIFskc2luZ2xldG9uLCAkZGF0YV0pOw0KDQogICAgICAgICAgICBpZiAoaXNzZXQoJG9wdGlvbnNbJ3JldmlzaW9uJ10pICYmICRvcHRpb25zWydyZXZpc2lvbiddKSB7DQogICAgICAgICAgICAgICAgJHRoaXMtPmFwcC0+aGVscGVyKCdyZXZpc2lvbnMnKS0+YWRkKCRzaW5nbGV0b25bJ19pZCddLCAkZGF0YSwgInNpbmdsZXRvbnMveyRzaW5nbGV0b25bJ25hbWUnXX0iLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuICRkYXRhOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICAnZ2V0RGF0YScgPT4gZnVuY3Rpb24oJG5hbWUsICRvcHRpb25zID0gW10pIHsNCg0KICAgICAgICBpZiAoJHNpbmdsZXRvbiA9ICR0aGlzLT5zaW5nbGV0b24oJG5hbWUpKSB7DQoNCiAgICAgICAgICAgICRvcHRpb25zID0gYXJyYXlfbWVyZ2UoWw0KICAgICAgICAgICAgICAgICd1c2VyJyA9PiBmYWxzZSwNCiAgICAgICAgICAgICAgICAncG9wdWxhdGUnID0+IGZhbHNlLA0KICAgICAgICAgICAgICAgICdsYW5nJyA9PiBmYWxzZSwNCiAgICAgICAgICAgICAgICAnaWdub3JlRGVmYXVsdEZhbGxiYWNrJyA9PiBmYWxzZQ0KICAgICAgICAgICAgXSwgJG9wdGlvbnMpOw0KDQogICAgICAgICAgICAkZGF0YSA9ICR0aGlzLT5hcHAtPnN0b3JhZ2UtPmdldEtleSgnc2luZ2xldG9ucycsICRuYW1lKTsNCg0KICAgICAgICAgICAgaWYgKGlzX251bGwoJGRhdGEpKSB7DQogICAgICAgICAgICAgICAgJGRhdGEgPSBbXTsNCiAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJHNpbmdsZXRvblsnZmllbGRzJ10pICYmIGlzX2FycmF5KCRzaW5nbGV0b25bJ2ZpZWxkcyddKSkgew0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkc2luZ2xldG9uWydmaWVsZHMnXSBhcyAkZikgJGRhdGFbJGZbJ25hbWUnXV0gPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGRhdGEgPSAkdGhpcy0+X2ZpbHRlckZpZWxkcygkZGF0YSwgJHNpbmdsZXRvbiwgJG9wdGlvbnMpOw0KDQogICAgICAgICAgICBpZiAoJG9wdGlvbnNbJ3BvcHVsYXRlJ10gJiYgZnVuY3Rpb25fZXhpc3RzKCdjb2NrcGl0X3BvcHVsYXRlX2NvbGxlY3Rpb24nKSkgew0KDQogICAgICAgICAgICAgICAgJGZpZWxkc0ZpbHRlciA9IFtdOw0KDQogICAgICAgICAgICAgICAgaWYgKCRvcHRpb25zWyd1c2VyJ10pICRmaWVsZHNGaWx0ZXJbJ3VzZXInXSA9ICRvcHRpb25zWyd1c2VyJ107DQogICAgICAgICAgICAgICAgaWYgKCRvcHRpb25zWydsYW5nJ10pICRmaWVsZHNGaWx0ZXJbJ2xhbmcnXSA9ICRvcHRpb25zWydsYW5nJ107DQoNCiAgICAgICAgICAgICAgICAkX2l0ZW1zID0gWyRkYXRhXTsNCiAgICAgICAgICAgICAgICAkX2l0ZW1zID0gY29ja3BpdF9wb3B1bGF0ZV9jb2xsZWN0aW9uKCRfaXRlbXMsIGludHZhbCgkb3B0aW9uc1sncG9wdWxhdGUnXSksIDAsICRmaWVsZHNGaWx0ZXIpOw0KICAgICAgICAgICAgICAgICRkYXRhID0gJF9pdGVtc1swXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHRoaXMtPmFwcC0+dHJpZ2dlcignc2luZ2xldG9uLmdldERhdGEuYWZ0ZXInLCBbJHNpbmdsZXRvbiwgJiRkYXRhXSk7DQogICAgICAgICAgICAkdGhpcy0+YXBwLT50cmlnZ2VyKCJzaW5nbGV0b24uZ2V0RGF0YS5hZnRlci57JG5hbWV9IiwgWyRzaW5nbGV0b24sICYkZGF0YV0pOw0KDQogICAgICAgICAgICByZXR1cm4gJGRhdGE7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9LA0KDQogICAgJ3NpbmdsZXRvbnMnID0+IGZ1bmN0aW9uKCkgew0KDQogICAgICAgICRzaW5nbGV0b25zID0gW107DQoNCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmFwcC0+aGVscGVyKCJmcyIpLT5scygnKi5zaW5nbGV0b24ucGhwJywgJyNzdG9yYWdlOnNpbmdsZXRvbicpIGFzICRwYXRoKSB7DQoNCiAgICAgICAgICAgICRzdG9yZSA9IGluY2x1ZGUoJHBhdGgtPmdldFBhdGhOYW1lKCkpOw0KICAgICAgICAgICAgJHNpbmdsZXRvbnNbJHN0b3JlWyduYW1lJ11dID0gJHN0b3JlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRzaW5nbGV0b25zOw0KICAgIH0sDQoNCiAgICAnZXhpc3RzJyA9PiBmdW5jdGlvbigkbmFtZSkgew0KICAgICAgICByZXR1cm4gJHRoaXMtPmFwcC0+cGF0aCgiI3N0b3JhZ2U6c2luZ2xldG9uL3skbmFtZX0uc2luZ2xldG9uLnBocCIpOw0KICAgIH0sDQoNCiAgICAnc2luZ2xldG9uJyA9PiBmdW5jdGlvbigkbmFtZSkgew0KDQogICAgICAgIHN0YXRpYyAkc2luZ2xldG9uOyAvLyBjYWNoZQ0KDQogICAgICAgIGlmIChpc19udWxsKCRzaW5nbGV0b24pKSB7DQogICAgICAgICAgICAkc2luZ2xldG9uID0gW107DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWlzX3N0cmluZygkbmFtZSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghaXNzZXQoJHNpbmdsZXRvblskbmFtZV0pKSB7DQoNCiAgICAgICAgICAgICRzaW5nbGV0b25bJG5hbWVdID0gZmFsc2U7DQoNCiAgICAgICAgICAgIGlmICgkcGF0aCA9ICR0aGlzLT5leGlzdHMoJG5hbWUpKSB7DQogICAgICAgICAgICAgICAgJHNpbmdsZXRvblskbmFtZV0gPSBpbmNsdWRlKCRwYXRoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkc2luZ2xldG9uWyRuYW1lXTsNCiAgICB9LA0KDQogICAgJ2dldEZpZWxkVmFsdWUnID0+IGZ1bmN0aW9uKCRzaW5nbGV0b24sICRmaWVsZG5hbWUsICRkZWZhdWx0ID0gbnVsbCwgJG9wdGlvbnMgPSBbXSkgew0KDQogICAgICAgICRkYXRhID0gJHRoaXMtPmdldERhdGEoJHNpbmdsZXRvbiwgJG9wdGlvbnMpOw0KDQogICAgICAgIHJldHVybiAoJGRhdGEgJiYgaXNzZXQoJGRhdGFbJGZpZWxkbmFtZV0pKSA/ICRkYXRhWyRmaWVsZG5hbWVdIDogJGRlZmF1bHQ7DQogICAgfSwNCg0KICAgICdfZmlsdGVyRmllbGRzJyA9PiBmdW5jdGlvbigkZGF0YSwgJHNpbmdsZXRvbiwgJGZpbHRlcikgew0KDQogICAgICAgIHN0YXRpYyAkY2FjaGU7DQogICAgICAgIHN0YXRpYyAkbGFuZ3VhZ2VzOw0KDQogICAgICAgIGlmIChudWxsID09PSAkZGF0YSkgew0KICAgICAgICAgICAgcmV0dXJuICRkYXRhOw0KICAgICAgICB9DQoNCiAgICAgICAgJGZpbHRlciA9IGFycmF5X21lcmdlKFsNCiAgICAgICAgICAgICd1c2VyJyA9PiBmYWxzZSwNCiAgICAgICAgICAgICdsYW5nJyA9PiBmYWxzZSwNCiAgICAgICAgICAgICdpZ25vcmVEZWZhdWx0RmFsbGJhY2snID0+IGZhbHNlDQogICAgICAgIF0sICRmaWx0ZXIpOw0KDQogICAgICAgIGV4dHJhY3QoJGZpbHRlcik7DQoNCiAgICAgICAgaWYgKG51bGwgPT09ICRjYWNoZSkgew0KICAgICAgICAgICAgJGNhY2hlID0gW107DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobnVsbCA9PT0gJGxhbmd1YWdlcykgew0KDQogICAgICAgICAgICAkbGFuZ3VhZ2VzID0gW107DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCR0aGlzLT5hcHAtPnJldHJpZXZlKCdjb25maWcvbGFuZ3VhZ2VzJywgW10pIGFzICRrZXkgPT4gJHZhbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc19udW1lcmljKCRrZXkpKSAka2V5ID0gJHZhbDsNCiAgICAgICAgICAgICAgICAkbGFuZ3VhZ2VzW10gPSAka2V5Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzX3N0cmluZygkc2luZ2xldG9uKSkgew0KICAgICAgICAgICAgJHNpbmdsZXRvbiA9ICR0aGlzLT5jb2xsZWN0aW9uKCRzaW5nbGV0b24pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFpc3NldCgkY2FjaGVbJHNpbmdsZXRvblsnbmFtZSddXSkpIHsNCg0KICAgICAgICAgICAgJGZpZWxkcyA9IFsNCiAgICAgICAgICAgICAgICAnYWNsJyA9PiBbXSwNCiAgICAgICAgICAgICAgICAnbG9jYWxpemUnID0+IFtdDQogICAgICAgICAgICBdOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkc2luZ2xldG9uWyJmaWVsZHMiXSBhcyAkZmllbGQpIHsNCg0KICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZmllbGRbJ2FjbCddKSAmJiBpc19hcnJheSgkZmllbGRbJ2FjbCddKSAmJiBjb3VudCgkZmllbGRbJ2FjbCddKSkgew0KICAgICAgICAgICAgICAgICAgICAkZmllbGRzWydhY2wnXVskZmllbGRbJ25hbWUnXV0gPSAkZmllbGRbJ2FjbCddOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZmllbGRbJ2xvY2FsaXplJ10pICYmICRmaWVsZFsnbG9jYWxpemUnXSkgew0KICAgICAgICAgICAgICAgICAgICAkZmllbGRzWydsb2NhbGl6ZSddWyRmaWVsZFsnbmFtZSddXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkY2FjaGVbJHNpbmdsZXRvblsnbmFtZSddXSA9ICRmaWVsZHM7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHVzZXIgJiYgY291bnQoJGNhY2hlWyRzaW5nbGV0b25bJ25hbWUnXV1bJ2FjbCddKSkgew0KDQogICAgICAgICAgICAkYWNsZmllbGRzID0gJGNhY2hlWyRzaW5nbGV0b25bJ25hbWUnXV1bJ2FjbCddOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkYWNsZmllbGRzIGFzICRuYW1lID0+ICRhY2wpIHsNCg0KICAgICAgICAgICAgICAgIGlmICghKCBpbl9hcnJheSgkdXNlclsnZ3JvdXAnXSwgJGFjbCkgfHwgaW5fYXJyYXkoJHVzZXJbJ19pZCddLCAkYWNsKSApKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgdW5zZXQoJGRhdGFbJG5hbWVdKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQoJGxhbmd1YWdlcykpIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGxhbmd1YWdlcyBhcyAkbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZGF0YVsieyRuYW1lfV97JGx9Il0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWyJ7JG5hbWV9X3skbH0iXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWyJ7JG5hbWV9X3skbH1fc2x1ZyJdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJGxhbmcgJiYgY291bnQoJGxhbmd1YWdlcykgJiYgY291bnQoJGNhY2hlWyRzaW5nbGV0b25bJ25hbWUnXV1bJ2xvY2FsaXplJ10pKSB7DQoNCiAgICAgICAgICAgICRsb2NhbGZpZWxkcyA9ICRjYWNoZVskc2luZ2xldG9uWyduYW1lJ11dWydsb2NhbGl6ZSddOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkbG9jYWxmaWVsZHMgYXMgJG5hbWUgPT4gJGxvY2FsKSB7DQoNCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkbGFuZ3VhZ2VzIGFzICRsKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRkYXRhWyJ7JG5hbWV9X3skbH0iXSkgJiYgJGRhdGFbInskbmFtZX1feyRsfSJdICE9PSAnJykgew0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGwgPT0gJGxhbmcpIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhWyRuYW1lXSA9ICRkYXRhWyJ7JG5hbWV9X3skbH0iXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZGF0YVsieyRuYW1lfV97JGx9X3NsdWciXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRhdGFbInskbmFtZX1fc2x1ZyJdID0gJGRhdGFbInskbmFtZX1feyRsfV9zbHVnIl07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkbCA9PSAkbGFuZyAmJiAkaWdub3JlRGVmYXVsdEZhbGxiYWNrKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaWdub3JlRGVmYXVsdEZhbGxiYWNrID09PSB0cnVlIHx8IChpc19hcnJheSgkaWdub3JlRGVmYXVsdEZhbGxiYWNrKSAmJiBpbl9hcnJheSgkbmFtZSwgJGlnbm9yZURlZmF1bHRGYWxsYmFjaykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRhdGFbJG5hbWVdID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWyJ7JG5hbWV9X3skbH0iXSk7DQogICAgICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWyJ7JG5hbWV9X3skbH1fc2x1ZyJdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGRhdGE7DQogICAgfQ0KDQpdKTsNCg0KLy8gQUNMDQokYXBwKCJhY2wiKS0+YWRkUmVzb3VyY2UoJ3NpbmdsZXRvbnMnLCBbJ2NyZWF0ZScsICdmb3JtJywgJ2VkaXQnLCAnZGF0YScsICdkZWxldGUnLCAnbWFuYWdlJ10pOw0KDQokdGhpcy0+bW9kdWxlKCdzaW5nbGV0b25zJyktPmV4dGVuZChbDQoNCiAgICAnZ2V0U2luZ2xldG9uc0luR3JvdXAnID0+IGZ1bmN0aW9uKCRncm91cCA9IG51bGwpIHsNCg0KICAgICAgICBpZiAoISRncm91cCkgew0KICAgICAgICAgICAgJGdyb3VwID0gJHRoaXMtPmFwcC0+bW9kdWxlKCdjb2NrcGl0JyktPmdldEdyb3VwKCk7DQogICAgICAgIH0NCg0KICAgICAgICAkX3NpbmdsZXRvbnMgPSAkdGhpcy0+c2luZ2xldG9ucygpOw0KICAgICAgICAkc2luZ2xldG9ucyA9IFtdOw0KDQogICAgICAgIGlmICgkdGhpcy0+YXBwLT5tb2R1bGUoJ2NvY2twaXQnKS0+aXNTdXBlckFkbWluKCkpIHsNCiAgICAgICAgICAgIHJldHVybiAkX3NpbmdsZXRvbnM7DQogICAgICAgIH0NCg0KICAgICAgICBmb3JlYWNoICgkX3NpbmdsZXRvbnMgYXMgJHNpbmdsZXRvbiA9PiAkbWV0YSkgew0KDQogICAgICAgICAgICBpZiAoaXNzZXQoJG1ldGFbJ2FjbCddWyRncm91cF1bJ2Zvcm0nXSkgJiYgJG1ldGFbJ2FjbCddWyRncm91cF1bJ2Zvcm0nXSkgew0KICAgICAgICAgICAgICAgICRzaW5nbGV0b25zWyRzaW5nbGV0b25dID0gJG1ldGE7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHNpbmdsZXRvbnM7DQogICAgfSwNCg0KICAgICdoYXNhY2Nlc3MnID0+IGZ1bmN0aW9uKCRzaW5nbGV0b24sICRhY3Rpb24sICRncm91cCA9IG51bGwpIHsNCg0KICAgICAgICAkc2luZ2xldG9uID0gJHRoaXMtPnNpbmdsZXRvbigkc2luZ2xldG9uKTsNCg0KICAgICAgICBpZiAoISRzaW5nbGV0b24pIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJGdyb3VwKSB7DQogICAgICAgICAgICAkZ3JvdXAgPSAkdGhpcy0+YXBwLT5tb2R1bGUoJ2NvY2twaXQnKS0+Z2V0R3JvdXAoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdGhpcy0+YXBwLT5tb2R1bGUoJ2NvY2twaXQnKS0+aXNTdXBlckFkbWluKCRncm91cCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzc2V0KCRzaW5nbGV0b25bJ2FjbCddWyRncm91cF1bJGFjdGlvbl0pKSB7DQogICAgICAgICAgICByZXR1cm4gJHNpbmdsZXRvblsnYWNsJ11bJGdyb3VwXVskYWN0aW9uXTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQpdKTsNCg0KLy8gUkVTVA0KaWYgKENPQ0tQSVRfQVBJX1JFUVVFU1QpIHsNCg0KICAgICRhcHAtPm9uKCdjb2NrcGl0LnJlc3QuaW5pdCcsIGZ1bmN0aW9uKCRyb3V0ZXMpIHsNCiAgICAgICAgJHJvdXRlc1snc2luZ2xldG9ucyddID0gJ1NpbmdsZXRvbnNcXENvbnRyb2xsZXJcXFJlc3RBcGknOw0KICAgIH0pOw0KDQogICAgLy8gYWxsb3cgYWNjZXNzIHRvIHB1YmxpYyBjb2xsZWN0aW9ucw0KICAgICRhcHAtPm9uKCdjb2NrcGl0LmFwaS5hdXRoZW50aWNhdGUnLCBmdW5jdGlvbigkZGF0YSkgew0KDQogICAgICAgIGlmICgkZGF0YVsndXNlciddIHx8ICRkYXRhWydyZXNvdXJjZSddICE9ICdzaW5nbGV0b25zJykgcmV0dXJuOw0KDQogICAgICAgIGlmIChpc3NldCgkZGF0YVsncXVlcnknXVsncGFyYW1zJ11bMV0pKSB7DQoNCiAgICAgICAgICAgICRzaW5nbGV0b24gPSAkdGhpcy0+bW9kdWxlKCdzaW5nbGV0b25zJyktPnNpbmdsZXRvbigkZGF0YVsncXVlcnknXVsncGFyYW1zJ11bMV0pOw0KDQogICAgICAgICAgICBpZiAoJHNpbmdsZXRvbiAmJiBpc3NldCgkc2luZ2xldG9uWydhY2wnXVsncHVibGljJ10pKSB7DQogICAgICAgICAgICAgICAgJGRhdGFbJ2F1dGhlbnRpY2F0ZWQnXSA9IHRydWU7DQogICAgICAgICAgICAgICAgJGRhdGFbJ3VzZXInXSA9IFsnX2lkJyA9PiBudWxsLCAnZ3JvdXAnID0+ICdwdWJsaWMnXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0KDQovLyBBRE1JTg0KaWYgKENPQ0tQSVRfQURNSU5fQ1ApIHsNCiAgICBpbmNsdWRlX29uY2UoX19ESVJfXy4nL2FkbWluLnBocCcpOw0KfQ0KDQovLyBDTEkNCmlmIChDT0NLUElUX0NMSSkgew0KICAgICR0aGlzLT5wYXRoKCcjY2xpJywgX19ESVJfXy4nL2NsaScpOw0KfQ0KIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";