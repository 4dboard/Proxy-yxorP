1689528008
waR3U4bTeM%3A7860216e4c917ba37d1b09675f680d29-d3b654d3aca9f39c674a8d7761d5fc31
s:5680:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImQzYjY1NGQzYWNhOWYzOWM2NzRhOGQ3NzYxZDVmYzMxIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTM6ImNvc21ldGljcy5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo0MjoiaW5zdGFsbC9jb2NrcGl0L2FkZG9ucy95eG9yUC9jb3NtZXRpY3MucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czozMzM1OiI8P3BocAoKJHRoaXMtPm9uKCdhZG1pbi5pbml0JywgZnVuY3Rpb24gKCkgdXNlICgkY29zbWV0aWNzKSB7CgogICAgaWYgKCFlbXB0eSgkY29zbWV0aWNzWyd3aWRnZXRzX3RpbWVyX2Rpc2FibGVkJ10pKSB7CgogICAgICAgIC8vIGRpc2FibGUgdGltZSB3aWRnZXQgaW4gZGFzaGJvYXJkCiAgICAgICAgJHRoaXMtPm9uKCdhZG1pbi5kYXNoYm9hcmQud2lkZ2V0cycsIGZ1bmN0aW9uICgkd2lkZ2V0cykgewoKICAgICAgICAgICAgZm9yZWFjaCAoJHdpZGdldHMgYXMgJGtleSA9PiAkd2lkZ2V0KSB7CiAgICAgICAgICAgICAgICBpZiAoJHdpZGdldFsnbmFtZSddID09ICd0aW1lJykgewogICAgICAgICAgICAgICAgICAgIHVuc2V0KCR3aWRnZXRzWyRrZXldKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICB9LCAwKTsKCiAgICB9CgogICAgaWYgKCFlbXB0eSgkY29zbWV0aWNzWydlbnRyeV9kZWZhdWx0X2dyb3VwX21haW4nXSkpIHsKCiAgICAgICAgLy8gU2V0IGRlZmF1bHQgZ3JvdXAgaW4gZW50cnkgdmlldyB0byAiTWFpbiIgKGRlZmF1bHQ6ICJBbGwiKQogICAgICAgIC8vIFdoZW4gdGhlIHBhZ2UgbG9hZHMsIGB0aGlzLmdyb3VwYCBpcyBhbiBlbXB0eSBzdHJpbmcuIEFmdGVyIHRoZSBmaXJzdAogICAgICAgIC8vIGNhbGwgb2YgYHRvZ2dsZUdyb3VwKClgIGl0IGlzICdHcm91cE5hbWUnIG9yIGZhbHNlLgogICAgICAgICR0aGlzLT5vbignY29sbGVjdGlvbnMuZW50cnkuYXNpZGUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVjaG8gJzxzcGFuIGlmPSJ7IGdyb3VwID09PSBcJ1wnICYmICEoZ3JvdXAgPSBcJ01haW5cJykgfSIgY2xhc3M9IiI+dGVzdDwvc3Bhbj4nOwogICAgICAgIH0pOwoKICAgIH0KCiAgICBpZiAoIWVtcHR5KCRjb3NtZXRpY3NbJ2VudHJ5X2xhbmd1YWdlX2J1dHRvbnMnXSkpIHsKCiAgICAgICAgLy8gYWRkIGJpZyBsYW5ndWFnZSBidXR0b25zIHRvIGFjdGlvbiBiYXIgKGNvbGxlY3Rpb24gZW50cnkpCiAgICAgICAgJHRoaXMtPm9uKCdjb2xsZWN0aW9ucy5lbnRyeS5hc2lkZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbmRlclZpZXcoJHRoaXMtPnBhdGgoJ3l4b3JwOnZpZXdzL3BhcnRpYWxzL2VudHJ5X2xhbmd1YWdlX2J1dHRvbnMucGhwJykpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBhZGQgYmlnIGxhbmd1YWdlIGJ1dHRvbnMgdG8gYWN0aW9uIGJhciAoc2luZ2xldG9uIGZvcm0pCiAgICAgICAgJHRoaXMtPm9uKCdzaW5nbGV0b25zLmZvcm0uYXNpZGUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW5kZXJWaWV3KCR0aGlzLT5wYXRoKCd5eG9ycDp2aWV3cy9wYXJ0aWFscy9zaW5nbGV0b25zX2xhbmd1YWdlX2J1dHRvbnMucGhwJykpOwogICAgICAgIH0pOwoKICAgIH0KCiAgICBpZiAoIWVtcHR5KCRjb3NtZXRpY3NbJ3d5c2l3eWdfZW50aXR5X2VuY29kaW5nX3JhdyddKSkgewoKICAgICAgICAvLyBTZXQgInJhdyIgZW5jb2RpbmcgZm9yIHd5c2l3eWcgZWRpdG9yIHRvIHByZXNlcnZlIHV0ZjggY2hhcmFjdGVycyBsaWtlIMOkLCDDtiwgw7wgZXRjLgogICAgICAgIC8vIFRoZSBkZWZhdWx0IGlzICJuYW1lZCIsIHNvIHRoZSBmdWxsIHRleHQgc2VhcmNoIGRvZXNuJ3QgZmludCB0ZXh0IHdpdGggIiZhdW1sOyIgZXRjLgogICAgICAgICR0aGlzLT5vbignYXBwLmxheW91dC5oZWFkZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVjaG8gJzxzY3JpcHQ+QXBwLiQoZG9jdW1lbnQpLm9uKCJpbml0LXd5c2l3eWctZWRpdG9yIiwgZnVuY3Rpb24oZSwgZWRpdG9yKSB7ZWRpdG9yLnNldHRpbmdzLmVudGl0eV9lbmNvZGluZyA9ICJyYXciO30pOzwvc2NyaXB0Pic7CiAgICAgICAgfSk7CgogICAgfQoKICAgIGlmICghZW1wdHkoJGNvc21ldGljc1snZGFya19tb2RlX3N3aXRjaCddKSkgewoKICAgICAgICAkdGhpcy0+YmluZCgnL2Rhcmttb2RlL3RvZ2dsZScsIGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICR1c2VyX2lkID0gJHRoaXMtPm1vZHVsZSgnY29ja3BpdCcpLT5nZXRVc2VyKCdfaWQnKTsKICAgICAgICAgICAgJG9uID0gJHRoaXMtPnN0b3JhZ2UtPmdldEtleSgnY29ja3BpdC9vcHRpb25zJywgJ2Rhcmttb2RlLicgLiAkdXNlcl9pZCwgZmFsc2UpOwoKICAgICAgICAgICAgJHRoaXMtPnN0b3JhZ2UtPnNldEtleSgnY29ja3BpdC9vcHRpb25zJywgJ2Rhcmttb2RlLicgLiAkdXNlcl9pZCwgISRvbik7CgogICAgICAgICAgICByZXR1cm4gWydkYXJrbW9kZScgPT4gISRvbl07CiAgICAgICAgfSk7CgogICAgICAgICR1c2VyX2lkID0gJHRoaXMtPm1vZHVsZSgnY29ja3BpdCcpLT5nZXRVc2VyKCdfaWQnKTsKICAgICAgICAkb24gPSAkdGhpcy0+c3RvcmFnZS0+Z2V0S2V5KCdjb2NrcGl0L29wdGlvbnMnLCAnZGFya21vZGUuJyAuICR1c2VyX2lkLCBmYWxzZSk7CgogICAgICAgIGlmICgkb24pIHsKICAgICAgICAgICAgJHRoaXMoJ2FkbWluJyktPmFkZGFzc2V0cygneXhvcnA6RGFya01vZGUvYXNzZXRzL3N0eWxlLm1pbi5jc3MnKTsKICAgICAgICAgICAgJHRoaXMoJ2FkbWluJyktPmFkZGFzc2V0cygneXhvcnA6RGFya01vZGUvYXNzZXRzL2Rhcmttb2RlLmpzJyk7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+b24oJ2NvY2twaXQubWVudS5zeXN0ZW0nLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAkdXNlcl9pZCA9ICR0aGlzLT5tb2R1bGUoJ2NvY2twaXQnKS0+Z2V0VXNlcignX2lkJyk7CiAgICAgICAgICAgICRvbiA9ICR0aGlzLT5zdG9yYWdlLT5nZXRLZXkoJ2NvY2twaXQvb3B0aW9ucycsICdkYXJrbW9kZS4nIC4gJHVzZXJfaWQsIGZhbHNlKTsKICAgICAgICAgICAgJHN0eWxlX3VybCA9ICR0aGlzLT5wYXRoVG9VcmwoJ3l4b3JwOkRhcmtNb2RlL2Fzc2V0cy9zdHlsZS5taW4uY3NzJywgdHJ1ZSk7CiAgICAgICAgICAgICRzY3JpcHRfdXJsID0gJHRoaXMtPnBhdGhUb1VybCgneXhvcnA6RGFya01vZGUvYXNzZXRzL2Rhcmttb2RlLmpzJywgdHJ1ZSk7CgogICAgICAgICAgICAkdGhpcy0+cmVuZGVyVmlldygneXhvcnA6RGFya01vZGUvdmlld3MvcGFydGlhbHMvbWVudV90b2dnbGUucGhwJywgY29tcGFjdCgnb24nLCAnc3R5bGVfdXJsJywgJ3NjcmlwdF91cmwnKSk7CiAgICAgICAgfSk7CgogICAgfQoKICAgIGlmICghZW1wdHkoJGNvc21ldGljc1snZGlzcGxheV9zb3J0YWJsZV9lbnRyaWVzJ10pKSB7CgogICAgICAgICR0aGlzKCdhZG1pbicpLT5hZGRhc3NldHMoJ3l4b3JwOmFzc2V0cy9kaXNwbGF5X3NvcnRhYmxlX2VudHJpZXMuY3NzJyk7CgogICAgfQoKfSk7CiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";